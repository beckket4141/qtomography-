# QTomography GUI 用户使用指南

> 面向最终用户的完整使用手册 - 适用于打包后的 QTomography.exe

**版本**: v1.0.0  
**最后更新**: 2025年11月

---

## 📋 目录

1. [快速开始](#快速开始)
2. [系统要求](#系统要求)
3. [安装和启动](#安装和启动)
4. [界面介绍](#界面介绍)
5. [使用教程](#使用教程)
6. [功能详解](#功能详解)
7. [常见问题](#常见问题)
8. [故障排除](#故障排除)

---

## 🚀 快速开始

### 第一次使用

1. **下载程序**：获取 `QTomography.exe` 文件
2. **启动程序**：双击 `QTomography.exe`（首次启动可能需要 3-5 秒）
3. **加载数据**：点击"选择文件"按钮，选择你的 CSV 或 Excel 数据文件
4. **配置参数**：设置维度、选择重构方法等
5. **执行重构**：点击"执行重构"按钮
6. **查看结果**：在结果面板中查看重构结果和可视化图表

---

## 💻 系统要求

### 最低要求

- **操作系统**：Windows 10 或更高版本
- **内存**：至少 4 GB RAM（推荐 8 GB）
- **磁盘空间**：至少 500 MB 可用空间
- **显示器**：分辨率至少 1280×720（推荐 1920×1080）

### 推荐配置

- **操作系统**：Windows 11
- **内存**：8 GB 或更多
- **处理器**：多核处理器（用于大数据处理）
- **磁盘空间**：1 GB 或更多（用于存储结果文件）

### 系统依赖

- **Visual C++ Redistributable**：通常已预装在 Windows 10+ 系统中
  - 如果程序无法启动，可能需要安装：https://aka.ms/vs/17/release/vc_redist.x64.exe

---

## 📦 安装和启动

### 方式 1：便携式使用（推荐）

**无需安装，直接运行**：

1. 将 `QTomography.exe` 下载到任意文件夹
2. 双击 `QTomography.exe` 即可启动
3. 可以创建桌面快捷方式方便使用

**优点**：
- ✅ 无需安装，不修改系统
- ✅ 可以放在 U 盘中使用
- ✅ 卸载简单（删除文件即可）

### 方式 2：安装程序（如果提供）

如果提供了安装程序（`QTomography-Setup.exe`）：

1. 双击运行安装程序
2. 按照向导完成安装
3. 从开始菜单或桌面快捷方式启动

**优点**：
- ✅ 可以创建开始菜单和桌面快捷方式
- ✅ 有卸载程序
- ✅ 更专业的用户体验

### 启动程序

**首次启动**：
- 可能需要 3-5 秒加载时间（正常现象）
- 程序会自动创建配置目录：`C:\Users\<用户名>\.qtomography\`

**后续启动**：
- 通常 1-2 秒即可启动
- 会自动加载上次保存的配置

**如果程序无法启动**：
- 检查系统要求是否满足
- 查看 [故障排除](#故障排除) 章节

---

## 🖥️ 界面介绍

### 主窗口布局

```
┌─────────────────────────────────────────────────────────┐
│  文件(F)  编辑(E)  视图(V)  帮助(H)                      │
├─────────────────────────────────────────────────────────┤
│                                                           │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐    │
│  │  数据面板   │  │  配置面板   │  │  执行面板   │    │
│  │             │  │             │  │             │    │
│  │ • 文件选择  │  │ • 维度设置  │  │ • 执行按钮  │    │
│  │ • 文件信息  │  │ • 方法选择  │  │ • 进度显示  │    │
│  └─────────────┘  └─────────────┘  └─────────────┘    │
│                                                           │
│  ┌───────────────────────────────────────────────────┐  │
│  │              结果汇总面板                          │  │
│  │  • 汇总表格                                        │  │
│  │  • 指标统计                                        │  │
│  └───────────────────────────────────────────────────┘  │
│                                                           │
│  ┌───────────────────────────────────────────────────┐  │
│  │              可视化面板                            │  │
│  │  • 2D 热图                                        │  │
│  │  • 3D 柱状图                                      │  │
│  └───────────────────────────────────────────────────┘  │
│                                                           │
└─────────────────────────────────────────────────────────┘
```

### 主要面板说明

#### 1. 数据面板（左上）

- **功能**：选择和显示数据文件，配置列选择范围
- **操作**：
  - 点击"选择文件"按钮选择 CSV 或 Excel 文件
  - 选择列处理模式（处理所有列 或 自定义列范围）
  - 如果选择自定义范围，输入起始列和结束列（1-based）
- **显示**：
  - 文件路径、大小、修改时间等信息
  - 数据列信息（有效列数、总列数、空列列表）
  - 列范围验证状态和错误提示

#### 2. 配置面板（中上）

- **功能**：配置重构参数
- **主要设置**：
  - 量子态维度（2、4、8、16 等）
  - 重构方法（Linear、WLS、RρR Strict）
  - 其他算法参数

#### 3. 执行面板（右上）

- **功能**：控制重构执行
- **操作**：
  - "执行重构"按钮：开始重构
  - "取消"按钮：取消正在进行的重构
- **显示**：实时进度和状态信息

#### 4. 结果汇总面板（中下）

- **功能**：显示重构结果的汇总信息
- **内容**：
  - 汇总表格（所有重构记录的统计）
  - 指标统计（均值、标准差等）

#### 5. 可视化面板（右下）

- **功能**：显示重构结果的可视化图表
- **图表类型**：
  - 2D 热图（密度矩阵的实部/虚部）
  - 3D 柱状图（幅度/相位、实部/虚部）

---

## 📖 使用教程

### 教程 1：基本重构流程

#### 步骤 1：准备数据文件

**数据格式要求**：
- **CSV 格式**：每行一个概率值，或每行一个测量结果
- **Excel 格式**：支持 `.xlsx` 和 `.xls` 文件
- **数据内容**：测量得到的概率向量

**示例数据格式**（CSV）：
```csv
0.25
0.25
0.25
0.25
```

或（Excel，第一列）：
```
A列
0.25
0.25
0.25
0.25
```

#### 步骤 2：加载数据

1. 点击数据面板中的 **"选择文件"** 按钮
2. 在文件对话框中选择你的数据文件（CSV 或 Excel）
3. 确认文件信息正确显示
4. **（可选）选择列范围**：
   - 程序会自动分析文件中的列信息
   - 默认选择"处理所有列"（处理文件中的所有样本）
   - 如果需要只处理部分列，选择"自定义列范围"：
     - 输入起始列号（例如：1）
     - 输入结束列号（例如：3）
     - 程序会自动验证范围并提示错误（如包含空列）

#### 步骤 3：配置参数

1. **设置维度**：
   - 在配置面板中找到"维度"设置
   - 输入量子态的维度（例如：2 表示 2×2 密度矩阵）

2. **选择重构方法**：
   - **Linear（线性重构）**：快速，适合大规模数据
   - **WLS（加权最小二乘）**：更精确，适合高保真度要求
   - **RρR Strict**：严格物理约束

3. **其他参数**（可选）：
   - 容差设置
   - 最大迭代次数（WLS）
   - 正则化参数

#### 步骤 4：执行重构

1. 点击执行面板中的 **"执行重构"** 按钮
2. 观察进度条和状态信息
3. 等待重构完成（通常几秒到几分钟，取决于数据大小）

#### 步骤 5：查看结果

1. **查看汇总表格**：
   - 在结果汇总面板中查看重构结果的统计信息
   - 包括：纯度、迹、保真度等指标

2. **查看可视化图表**：
   - 在可视化面板中查看密度矩阵的可视化
   - 可以切换不同的视图（2D 热图、3D 柱状图）

3. **保存结果**（可选）：
   - 结果会自动保存到指定的输出目录
   - 包括 JSON 格式的详细记录和 CSV 格式的汇总

### 教程 2：批量处理多个文件

1. **准备多个数据文件**：
   - 将多个 CSV 或 Excel 文件放在同一个文件夹中

2. **逐个处理**：
   - 对每个文件重复基本重构流程
   - 或使用 CLI 工具进行批量处理（如果已安装）

3. **查看汇总结果**：
   - 所有结果会汇总在一个 `summary.csv` 文件中
   - 可以对比不同文件的重构结果

### 教程 3：使用谱分解功能

1. **加载已重构的结果**：
   - 从结果目录中选择一个重构记录

2. **执行谱分解**：
   - 在谱分解面板中点击"执行谱分解"
   - 查看密度矩阵的特征值和特征向量

3. **分析结果**：
   - 查看特征值分布
   - 分析量子态的混合程度

---

## 🔧 功能详解

### 1. 数据加载

#### 支持的文件格式

- **CSV 文件**（`.csv`）：
  - 纯文本格式，每行一个数值
  - 可以使用 Excel 或文本编辑器创建

- **Excel 文件**（`.xlsx`, `.xls`）：
  - 支持多个工作表
  - 可以指定读取哪个工作表

#### 数据要求

- **数据维度**：必须是 d² 个数值（d 是量子态维度）
  - 2 维系统：4 个数值（4 行）
  - 4 维系统：16 个数值（16 行）
  - 8 维系统：64 个数值（64 行）

- **数据布局**：
  - **每行**：表示一个测量基的概率
  - **每列**：表示一个样本的所有测量概率
  - **无表头**：第一行直接是数据，不是列名

- **数据范围**：概率值应该在 [0, 1] 范围内
- **数据完整性**：不能有缺失值

**详细格式说明**：请参阅 [数据格式指南](DATA_FORMAT_GUIDE.md) - 包含完整的 Excel 和 CSV 格式说明、示例和常见问题

#### 列选择功能

**功能说明**：
- 程序支持选择处理文件中的部分列（样本），而不是处理所有列
- 适用于文件包含多个样本，但只需要处理其中一部分的场景

**使用方法**：
1. **自动分析**：选择文件后，程序会自动分析列信息
   - 显示有效列数和总列数
   - 显示空列列表（如果有）
   
2. **选择模式**：
   - **处理所有列**（默认）：处理文件中的所有有效列
   - **自定义列范围**：只处理指定范围的列
     - 输入起始列号（1-based，例如：1 表示第 1 列）
     - 输入结束列号（1-based，例如：3 表示第 3 列）
     - 如果起始和结束相同，表示只处理单列

3. **验证机制**：
   - 程序会自动验证列范围是否有效
   - 如果范围超出总列数，会显示错误提示
   - 如果范围包含空列，会显示警告并阻止执行
   - 实时验证，输入时即可看到错误提示

**使用场景**：
- 文件包含 100 个样本，但只需要处理前 10 个
- 文件包含多个实验组，只需要处理某一组
- 快速测试：只处理少量样本验证参数设置

**注意事项**：
- 列号是 1-based（与 Excel 列号一致）
- 空列会被自动检测并排除
- 列范围会在配置中保存，下次打开相同文件时会自动恢复

### 2. 重构方法

#### Linear（线性重构）

**特点**：
- ✅ 速度快（通常 < 1 秒）
- ✅ 适合大规模数据
- ✅ 支持正则化

**适用场景**：
- 快速预览结果
- 处理大量数据
- 对精度要求不高的场景

#### WLS（加权最小二乘）

**特点**：
- ✅ 精度高
- ✅ 自动保证物理约束
- ✅ 迭代优化

**适用场景**：
- 高保真度要求
- 精确的量子态重构
- 科学研究

#### RρR Strict

**特点**：
- ✅ 严格的物理约束
- ✅ 保证正半定性

**适用场景**：
- 需要严格物理约束的场景
- 特殊研究需求

### 3. 结果查看

#### 汇总表格

显示所有重构记录的统计信息：

| 指标 | 说明 |
|------|------|
| 纯度 (Purity) | 量子态的纯度，范围 [0, 1] |
| 迹 (Trace) | 密度矩阵的迹，应该接近 1 |
| 保真度 (Fidelity) | 与目标态的保真度 |
| 特征值 | 密度矩阵的特征值 |
| 条件数 | 数值稳定性指标 |

#### 可视化图表

**2D 热图**：
- 显示密度矩阵的实部和虚部
- 颜色深浅表示数值大小

**3D 柱状图**：
- 显示密度矩阵元素的幅度和相位
- 或显示实部和虚部

### 4. 配置保存和加载

#### 保存配置

- 配置会自动保存到：`C:\Users\<用户名>\.qtomography\gui_config.json`
- 下次启动时会自动加载上次的配置

#### 手动保存/加载

- 可以通过菜单"文件" → "保存配置"手动保存
- 通过"文件" → "加载配置"加载已保存的配置

---

## ❓ 常见问题

### Q1: 程序启动很慢怎么办？

**A**: 首次启动需要 3-5 秒是正常的（需要解压文件）。如果超过 10 秒：
- 检查磁盘空间是否充足
- 检查杀毒软件是否在扫描文件
- 尝试将程序放在 SSD 上

### Q2: 提示"无法打开文件"怎么办？

**A**: 
- 检查文件路径是否正确
- 检查文件是否被其他程序占用
- 检查文件格式是否支持（CSV 或 Excel）
- 检查文件权限

### Q3: 重构结果不正确怎么办？

**A**:
- 检查数据格式是否正确
- 检查维度设置是否匹配数据
- 检查数据是否完整（没有缺失值）
- 尝试不同的重构方法
- 查看日志文件了解详细错误信息

### Q4: 如何查看日志文件？

**A**: 日志文件位置：
```
C:\Users\<用户名>\.qtomography\logs\qtomography_gui.log
```

可以用文本编辑器打开查看。

### Q5: 程序占用内存很大怎么办？

**A**: 
- 处理大数据时占用 500 MB - 1 GB 是正常的
- 如果超过 2 GB，可能是数据文件过大
- 尝试处理较小的数据文件
- 关闭其他占用内存的程序

### Q6: 可以同时处理多个文件吗？

**A**: 
- GUI 版本一次只能处理一个文件
- 如果需要批量处理，可以使用 CLI 工具
- 或者逐个处理多个文件

### Q7: 结果文件保存在哪里？

**A**: 
- 默认保存在程序运行目录下的 `results/` 文件夹
- 可以在执行面板中指定输出目录
- 包括：
  - `records/` - JSON 格式的详细记录
  - `summary.csv` - 汇总表格

---

## 🔍 故障排除

### 问题 1：程序无法启动

**症状**：双击 exe 文件没有反应

**可能原因和解决方案**：

1. **缺少系统依赖**：
   - 安装 Visual C++ Redistributable
   - 下载：https://aka.ms/vs/17/release/vc_redist.x64.exe

2. **杀毒软件拦截**：
   - 将程序添加到杀毒软件白名单
   - 或暂时关闭杀毒软件测试

3. **文件损坏**：
   - 重新下载程序文件
   - 检查文件完整性

4. **权限问题**：
   - 右键点击程序，选择"以管理员身份运行"
   - 检查文件夹权限

### 问题 2：程序启动后立即关闭

**症状**：程序窗口一闪而过就关闭了

**解决方案**：

1. **查看日志文件**：
   - 位置：`C:\Users\<用户名>\.qtomography\logs\qtomography_gui.log`
   - 查看最后几行错误信息

2. **检查配置文件**：
   - 删除配置文件：`C:\Users\<用户名>\.qtomography\gui_config.json`
   - 重新启动程序

3. **联系技术支持**：
   - 提供日志文件内容
   - 描述具体操作步骤

### 问题 3：数据文件无法加载

**症状**：选择文件后没有反应或提示错误

**解决方案**：

1. **检查文件格式**：
   - 确保是 CSV 或 Excel 格式
   - 检查文件扩展名是否正确

2. **检查文件内容**：
   - 确保数据格式正确
   - 检查是否有缺失值
   - 检查数据范围是否合理

3. **检查文件权限**：
   - 确保文件没有被其他程序占用
   - 检查文件读取权限

### 问题 4：重构失败

**症状**：点击"执行重构"后提示错误

**解决方案**：

1. **检查数据维度**：
   - 确保数据数量是 d²（d 是维度）
   - 例如：2 维需要 4 个数据，4 维需要 16 个数据

2. **检查参数设置**：
   - 确保维度设置正确
   - 检查其他参数是否合理

3. **尝试不同方法**：
   - 先尝试 Linear 方法（更稳定）
   - 如果失败，检查数据质量

4. **查看日志**：
   - 查看日志文件了解详细错误信息

### 问题 5：可视化图表不显示

**症状**：结果面板中没有显示图表

**解决方案**：

1. **检查结果是否生成**：
   - 确保重构成功完成
   - 检查结果目录是否有文件

2. **尝试刷新**：
   - 关闭并重新打开可视化面板
   - 或重新执行重构

3. **检查显示设置**：
   - 检查屏幕分辨率
   - 尝试调整窗口大小

---

## 📞 获取帮助

### 在线资源

- **GitHub 仓库**：https://github.com/yourusername/qtomography
- **问题反馈**：https://github.com/yourusername/qtomography/issues
- **文档**：https://github.com/yourusername/qtomography/tree/main/docs

### 联系方式

- **邮箱**：your.email@example.com
- **GitHub Issues**：提交问题时请附上：
  - 程序版本
  - 操作系统版本
  - 日志文件内容
  - 详细的问题描述和复现步骤

### 日志文件位置

如果遇到问题，请提供日志文件：
```
C:\Users\<用户名>\.qtomography\logs\qtomography_gui.log
```

---

## 📝 更新日志

### v1.0.0 (2025-11)

- ✅ 首次发布
- ✅ 支持 CSV 和 Excel 数据加载
- ✅ 支持 Linear、WLS、RρR Strict 重构方法
- ✅ 完整的结果可视化和汇总功能
- ✅ 配置保存和加载功能

---

**最后更新**: 2025年11月  
**文档版本**: 1.0.0

如有问题或建议，欢迎反馈！

