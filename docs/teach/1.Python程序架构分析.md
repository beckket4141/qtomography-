# é‡å­æ€å±‚æé‡æ„ç³»ç»Ÿ - Pythonç¨‹åºæ¶æ„åˆ†æ

> **åˆ†ææ—¥æœŸ**: 2025å¹´11æœˆ  
> **é¡¹ç›®ç‰ˆæœ¬**: v1.0.0  
> **æ¶æ„æ¨¡å¼**: DDD-liteï¼ˆè½»é‡çº§é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰+ ç­–ç•¥æ¨¡å¼ + MVC

---

## ğŸ“‹ ç›®å½•
- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [æ•´ä½“æ¶æ„](#æ•´ä½“æ¶æ„)
- [åˆ†å±‚è®¾è®¡](#åˆ†å±‚è®¾è®¡)
- [æ ¸å¿ƒæ¨¡å—åˆ†æ](#æ ¸å¿ƒæ¨¡å—åˆ†æ)
- [è®¾è®¡æ¨¡å¼åº”ç”¨](#è®¾è®¡æ¨¡å¼åº”ç”¨)
- [æ•°æ®æµåˆ†æ](#æ•°æ®æµåˆ†æ)
- [ä¾èµ–å…³ç³»å›¾](#ä¾èµ–å…³ç³»å›¾)
- [æ¶æ„ä¼˜åŠ¿](#æ¶æ„ä¼˜åŠ¿)
- [æ”¹è¿›å»ºè®®](#æ”¹è¿›å»ºè®®)

---

## é¡¹ç›®æ¦‚è¿°

### åŸºæœ¬ä¿¡æ¯
| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **é¡¹ç›®åç§°** | qtomography - é«˜ç»´OAMå…¨æ¯å›¾ç”Ÿæˆä¸é‡å­å±‚æä¸€ä½“åŒ–å·¥å…·é“¾ |
| **å½“å‰ç‰ˆæœ¬** | v1.0.0 |
| **ä»£ç è§„æ¨¡** | ~8000+ è¡Œä»£ç ï¼Œ50+ ä¸ªæ¨¡å— |
| **æµ‹è¯•è¦†ç›–** | 36+ å•å…ƒ/é›†æˆæµ‹è¯•ï¼Œä¸MATLABåŸºå‡†å¯¹é½ï¼ˆè¯¯å·® < 1e-10ï¼‰ |
| **æ¶æ„æ¨¡å¼** | DDD-liteï¼ˆè½»é‡çº§é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰+ ç­–ç•¥æ¨¡å¼ + MVC |
| **æŠ€æœ¯æ ˆ** | Python 3.9+, NumPy, SciPy, Pandas, Matplotlib, PySide6 |

### æ ¸å¿ƒåŠŸèƒ½
- **é‡å­æ€é‡æ„**: çº¿æ€§é‡æ„ï¼ˆLinearï¼‰+ åŠ æƒæœ€å°äºŒä¹˜ï¼ˆWLSï¼‰+ RÏR Stricté‡æ„ + MLEé‡æ„
- **æµ‹é‡åŸºæ”¯æŒ**: MUBã€SICã€NoPOVMç­‰å¤šç§æµ‹é‡è®¾è®¡
- **Bellæ€åˆ†æ**: çº ç¼ åº¦è¯„ä¼°ä¸å¯è§†åŒ–
- **è°±åˆ†è§£åˆ†æ**: å¯†åº¦çŸ©é˜µç‰¹å¾å€¼åˆ†è§£ä¸å¯è§†åŒ–
- **æ‰¹å¤„ç†**: å¤šæ ·æœ¬å¹¶è¡Œå¤„ç†
- **ç»“æœæŒä¹…åŒ–**: JSONè®°å½• + CSVæ±‡æ€» + è°±åˆ†è§£æŠ¥å‘Š
- **å¯è§†åŒ–**: å¯†åº¦çŸ©é˜µã€ä¿çœŸåº¦ã€3Då›¾è¡¨ã€è°±åˆ†è§£å¯è§†åŒ–
- **å›¾å½¢ç•Œé¢**: PySide6æ¡Œé¢GUIåº”ç”¨ï¼Œæ”¯æŒå®æ—¶è¿›åº¦æ˜¾ç¤ºå’Œäº¤äº’å¼å¯è§†åŒ–

### æ¶æ„å®šä½
æœ¬é¡¹ç›®é‡‡ç”¨**DDD-liteï¼ˆè½»é‡çº§é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰+ MVC**æ¶æ„ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š
- âœ… æ¸…æ™°çš„åˆ†å±‚ç»“æ„ï¼ˆæ¥å£å±‚ã€åº”ç”¨å±‚ã€é¢†åŸŸå±‚ã€åŸºç¡€è®¾æ–½å±‚ï¼‰
- âœ… é¢†åŸŸæ¨¡å‹çš„éƒ¨åˆ†å®ç°ï¼ˆDensityMatrixã€ProjectorSetç­‰å®ä½“ï¼‰
- âœ… ç­–ç•¥æ¨¡å¼çš„åº”ç”¨ï¼ˆå¤šç§é‡æ„ç®—æ³•ï¼‰
- âœ… MVCæ¨¡å¼çš„åº”ç”¨ï¼ˆGUIç•Œé¢åˆ†ç¦»ï¼‰
- âš ï¸ å°šæœªè¾¾åˆ°å®Œæ•´DDDæ ‡å‡†ï¼ˆç¼ºå°‘èšåˆæ ¹ã€é¢†åŸŸäº‹ä»¶ç­‰ï¼‰

**è¯´æ˜**: è¿™æ˜¯ä¸€ä¸ªä¼˜ç§€çš„DDD-lite + MVCæ¶æ„ï¼Œé€‚åˆä¸­å°å‹é¡¹ç›®ï¼Œå¹³è¡¡äº†å¤æ‚åº¦å’Œå®ç”¨æ€§ï¼Œæ— éœ€å¼ºåˆ¶å‡çº§åˆ°å®Œæ•´DDDã€‚

---

## æ•´ä½“æ¶æ„

### æ¶æ„å›¾

#### æ‰‹ç»˜é£æ ¼æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ¯ é‡å­æ€å±‚æé‡æ„ç³»ç»Ÿæ¶æ„å›¾                    â”‚
â”‚                      (DDD-lite + ç­–ç•¥æ¨¡å¼)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± æ¥å£å±‚ (Interface Layer)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚    CLI      â”‚  â”‚    GUI      â”‚  â”‚    API      â”‚             â”‚
â”‚  â”‚ (å·²å®ç°)     â”‚  â”‚ (å·²å®ç°)     â”‚  â”‚ (è®¡åˆ’ä¸­)     â”‚             â”‚
â”‚  â”‚ cli/main.py â”‚  â”‚ gui/app.py  â”‚  â”‚   å¾…å¼€å‘     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ® åº”ç”¨å±‚ (Application Layer)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   Controller        â”‚  â”‚   Config            â”‚               â”‚
â”‚  â”‚ é‡æ„æµç¨‹æ§åˆ¶         â”‚  â”‚ é…ç½®ç®¡ç†             â”‚               â”‚
â”‚  â”‚ app/controller.py   â”‚  â”‚ app/config_io.py    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ§  é¢†åŸŸå±‚ (Domain Layer) - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  Density    â”‚  â”‚ Projectors  â”‚  â”‚Reconstructionâ”‚             â”‚
â”‚  â”‚ å¯†åº¦çŸ©é˜µ     â”‚  â”‚ æŠ•å½±ç®—ç¬¦     â”‚  â”‚   é‡æ„ç®—æ³•   â”‚             â”‚
â”‚  â”‚density.py   â”‚  â”‚projectors.pyâ”‚  â”‚linear/wls/  â”‚             â”‚
â”‚  â”‚             â”‚  â”‚measurement/ â”‚  â”‚rhor_strict/ â”‚             â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚mle         â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š åˆ†æå±‚ (Analysis Layer) - ä¸šåŠ¡æ‰©å±•å±‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚    Bell     â”‚  â”‚   Metrics   â”‚  â”‚ Comparison  â”‚             â”‚
â”‚  â”‚ Bellæ€åˆ†æ   â”‚  â”‚   æŒ‡æ ‡è®¡ç®—   â”‚  â”‚   æ–¹æ³•å¯¹æ¯”   â”‚             â”‚
â”‚  â”‚ bell.py     â”‚  â”‚ metrics.py  â”‚  â”‚comparison.pyâ”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ—ï¸ åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚   Repository        â”‚  â”‚   Visualizer        â”‚               â”‚
â”‚  â”‚   ç»“æœå­˜å‚¨           â”‚  â”‚   å¯è§†åŒ–             â”‚               â”‚
â”‚  â”‚ persistence/        â”‚  â”‚ visualization/      â”‚               â”‚
â”‚  â”‚   Cache             â”‚  â”‚   IO                â”‚               â”‚
â”‚  â”‚   ç¼“å­˜ä¼˜åŒ–           â”‚  â”‚   æ•°æ®åŠ è½½           â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”§ å·¥å…·å±‚ (Utils Layer) - æŠ€æœ¯æ‰©å±•å±‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Utils                                  â”‚ â”‚
â”‚  â”‚                  å·¥å…·å‡½æ•°                                   â”‚ â”‚
â”‚  â”‚                 utils/ (å¾…æ‰©å±•)                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ æ•°æ®æµå‘è¯´æ˜                                                â”‚
â”‚  CLI â†’ Controller â†’ Domain â†’ Analysis â†’ Infrastructure â†’ Utils  â”‚
â”‚  â†‘                    â†‘         â†‘           â†‘           â†‘      â”‚
â”‚  ç”¨æˆ·è¾“å…¥              æ ¸å¿ƒé€»è¾‘   åå¤„ç†åˆ†æ   æŠ€æœ¯å®ç°    å·¥å…·æ”¯æŒ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ è®¾è®¡æ¨¡å¼åº”ç”¨                                                â”‚
â”‚  â€¢ ç­–ç•¥æ¨¡å¼: é‡æ„ç®—æ³•é€‰æ‹© (Linear/WLS/RÏR Strict/MLE)        â”‚
â”‚  â€¢ ç­–ç•¥æ¨¡å¼: æµ‹é‡åŸºè®¾è®¡é€‰æ‹© (MUB/SIC/NoPOVM)                   â”‚
â”‚  â€¢ å·¥å‚æ¨¡å¼: é…ç½®å¯¹è±¡åˆ›å»º                                       â”‚
â”‚  â€¢ å•ä¾‹æ¨¡å¼: æŠ•å½±ç®—ç¬¦ç¼“å­˜ï¼ˆLRUä¼˜åŒ–ï¼‰                            â”‚
â”‚  â€¢ æ¨¡æ¿æ–¹æ³•: é‡æ„æµç¨‹æ ‡å‡†åŒ–                                     â”‚
â”‚  â€¢ MVCæ¨¡å¼: GUIç•Œé¢åˆ†ç¦» (Model-View-Controller)                â”‚
â”‚  â€¢ è§‚å¯Ÿè€…æ¨¡å¼: GUIäº‹ä»¶å¤„ç† (Qtä¿¡å·æ§½æœºåˆ¶)                       â”‚
â”‚  â€¢ DDDæ¨¡å¼: GUIå†…éƒ¨é‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆdomain/application/infraï¼‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ‰‹ç»˜é£æ ¼è¯´æ˜
è¿™ä¸ªæ¶æ„å›¾é‡‡ç”¨äº†æ‰‹ç»˜é£æ ¼çš„ç‰¹ç‚¹ï¼š
1. **è¾¹æ¡†è®¾è®¡**ï¼šä½¿ç”¨ `â”Œâ”€â”` å’Œ `â””â”€â”˜` å­—ç¬¦ç»˜åˆ¶è¾¹æ¡†
2. **å±‚æ¬¡æ¸…æ™°**ï¼šæ¯å±‚ç”¨ä¸åŒçš„ç¬¦å·å’Œé¢œè‰²æ ‡è¯†
3. **æ¨¡å—åˆ†ç»„**ï¼šç›¸å…³æ¨¡å—ç”¨æ–¹æ¡†åŒ…å›´
4. **ç®­å¤´æŒ‡å‘**ï¼šç”¨ `â†“` è¡¨ç¤ºä¾èµ–å…³ç³»
5. **è¯´æ˜æ–‡å­—**ï¼šåœ¨åº•éƒ¨æ·»åŠ äº†æ•°æ®æµå‘å’Œè®¾è®¡æ¨¡å¼è¯´æ˜

**è§†è§‰ç‰¹ç‚¹**ï¼š
- **å±‚æ¬¡æ„Ÿ**ï¼šä»ä¸Šåˆ°ä¸‹çš„ä¾èµ–å…³ç³»æ¸…æ™°
- **æ¨¡å—åŒ–**ï¼šæ¯ä¸ªæ¨¡å—éƒ½æœ‰æ˜ç¡®çš„è¾¹ç•Œ
- **æ‰©å±•æ€§**ï¼šåˆ†æå±‚å’Œå·¥å…·å±‚ç”¨ä¸åŒé¢œè‰²æ ‡è¯†ä¸ºæ‰©å±•å±‚
- **å®ç”¨æ€§**ï¼šæ ‡æ³¨äº†å®ç°çŠ¶æ€ï¼ˆå·²å®ç°/è®¡åˆ’ä¸­/å¾…æ‰©å±•ï¼‰

#### ä¼ ç»ŸMermaidæ¶æ„å›¾

```mermaid
graph TB
    subgraph "ç”¨æˆ·æ¥å£å±‚"
        CLI[CLIå‘½ä»¤è¡Œå·¥å…·]
        GUI[GUIç•Œé¢ - PySide6]
        API[APIæ¥å£ - å¾…å®ç°]
    end
    
    subgraph "GUIå±‚ (qtomography/gui/)"
        MainWindow[MainWindow<br/>ä¸»çª—å£]
        DataPanel[DataPanel<br/>æ•°æ®é¢æ¿]
        ConfigPanel[ConfigPanel<br/>é…ç½®é¢æ¿]
        ExecutePanel[ExecutePanel<br/>æ‰§è¡Œé¢æ¿]
        ProgressPanel[ProgressPanel<br/>è¿›åº¦é¢æ¿]
        SummaryPanel[SummaryPanel<br/>ç»“æœé¢æ¿]
        FigurePanel[FigurePanel<br/>å›¾åƒé¢æ¿]
        SpectralPanel[SpectralPanel<br/>è°±åˆ†è§£é¢æ¿]
        FidelityPanel[FidelityPanel<br/>ä¿çœŸåº¦é¢æ¿]
        ControllerRunner[ControllerRunner<br/>æ§åˆ¶å™¨è¿è¡Œå™¨]
        SpectralRunner[SpectralRunner<br/>è°±åˆ†è§£è¿è¡Œå™¨]
        FidelityService[FidelityService<br/>ä¿çœŸåº¦æœåŠ¡]
        ImageViewer[ImageViewer<br/>å›¾åƒæŸ¥çœ‹å™¨]
        subgraph "GUIå†…éƒ¨æ¶æ„ (DDD)"
            GUIConfig[gui/domain<br/>GUIé…ç½®é¢†åŸŸ]
            ConfigUseCase[gui/application<br/>é…ç½®ç”¨ä¾‹]
            ConfigRepo[gui/infrastructure<br/>é…ç½®å­˜å‚¨]
        end
    end
    
    subgraph "åº”ç”¨å±‚ (qtomography/app/)"
        Controller[ReconstructionController<br/>é‡æ„æ§åˆ¶å™¨]
        Config[ConfigIO<br/>é…ç½®ç®¡ç†]
    end
    
    subgraph "é¢†åŸŸå±‚ (qtomography/domain/)"
        Density[DensityMatrix<br/>å¯†åº¦çŸ©é˜µ]
        Projectors[ProjectorSet<br/>æŠ•å½±ç®—ç¬¦]
        Measurement[Measurement<br/>æµ‹é‡åŸºè®¾è®¡<br/>MUB/SIC/NoPOVM]
        Linear[LinearReconstructor<br/>çº¿æ€§é‡æ„]
        WLS[WLSReconstructor<br/>åŠ æƒæœ€å°äºŒä¹˜]
        RrhoR[RrhoStrictReconstructor<br/>RÏR Stricté‡æ„]
        MLE[MLEReconstructor<br/>MLEé‡æ„]
        Spectral[SpectralDecomposition<br/>è°±åˆ†è§£]
    end
    
    subgraph "åˆ†æå±‚ (qtomography/analysis/)"
        Bell[BellAnalysis<br/>Bellæ€åˆ†æ]
        Metrics[Metrics<br/>æŒ‡æ ‡è®¡ç®—]
        Comparison[Comparison<br/>æ–¹æ³•å¯¹æ¯”]
    end
    
    subgraph "åŸºç¡€è®¾æ–½å±‚ (qtomography/infrastructure/)"
        Repository[ResultRepository<br/>ç»“æœå­˜å‚¨]
        SpectralRepo[SpectralReporter<br/>è°±åˆ†è§£æŠ¥å‘Š]
        Visualizer[ReconstructionVisualizer<br/>é‡æ„å¯è§†åŒ–]
        SpectralViz[SpectralVisualizer<br/>è°±åˆ†è§£å¯è§†åŒ–]
        Cache[LRUCache<br/>ç¼“å­˜ä¼˜åŒ–]
        IO[DensityLoader<br/>æ•°æ®åŠ è½½]
    end
    
    subgraph "å·¥å…·å±‚ (qtomography/utils/)"
        Utils[å·¥å…·å‡½æ•°<br/>å¾…æ‰©å±•]
    end
    
    CLI --> Controller
    GUI --> MainWindow
    MainWindow --> DataPanel
    MainWindow --> ConfigPanel
    MainWindow --> ExecutePanel
    MainWindow --> ProgressPanel
    MainWindow --> SummaryPanel
    MainWindow --> FigurePanel
    ExecutePanel --> ControllerRunner
    ControllerRunner --> Controller
    Controller --> Linear
    Controller --> WLS
    Controller --> RrhoR
    Controller --> MLE
    Linear --> Density
    WLS --> Density
    RrhoR --> Density
    MLE --> Density
    Linear --> Projectors
    WLS --> Projectors
    RrhoR --> Projectors
    MLE --> Projectors
    Projectors --> Measurement
    Controller --> Spectral
    Controller --> Repository
    Controller --> SpectralRepo
    Controller --> Visualizer
    Controller --> SpectralViz
    Repository --> Bell
    SpectralRunner --> Spectral
    SpectralRunner --> SpectralViz
    Bell --> Metrics
    Metrics --> Comparison
```

### ç›®å½•ç»“æ„

```
qtomography/
â”œâ”€â”€ __init__.py                 # åŒ…åˆå§‹åŒ–
â”œâ”€â”€ domain/                     # é¢†åŸŸå±‚ - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ density.py              # å¯†åº¦çŸ©é˜µå®ä½“
â”‚   â”œâ”€â”€ projectors.py           # æŠ•å½±ç®—ç¬¦é›†åˆ
â”‚   â”œâ”€â”€ projectors_optimized.py # ä¼˜åŒ–ç‰ˆæŠ•å½±ç®—ç¬¦
â”‚   â”œâ”€â”€ theoretical_state.py     # ç†è®ºæ€ç”Ÿæˆ
â”‚   â”œâ”€â”€ spectral_decomposition.py # è°±åˆ†è§£
â”‚   â”œâ”€â”€ measurement/            # æµ‹é‡åŸºè®¾è®¡
â”‚   â”‚   â”œâ”€â”€ mub.py              # MUBæµ‹é‡åŸº
â”‚   â”‚   â”œâ”€â”€ sic.py              # SIC-POVMæµ‹é‡åŸº
â”‚   â”‚   â””â”€â”€ nopovm.py           # NoPOVMæµ‹é‡åŸº
â”‚   â”œâ”€â”€ reconstruction/         # é‡æ„ç®—æ³•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ linear.py           # çº¿æ€§é‡æ„
â”‚   â”‚   â”œâ”€â”€ wls.py              # åŠ æƒæœ€å°äºŒä¹˜é‡æ„
â”‚   â”‚   â”œâ”€â”€ rhor_strict.py     # RÏR Stricté‡æ„
â”‚   â”‚   â””â”€â”€ mle.py              # MLEé‡æ„
â”‚   â”œâ”€â”€ persistence/            # æŒä¹…åŒ–æ¥å£
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ result_repository.py
â”‚   â””â”€â”€ ports/                  # ç«¯å£å®šä¹‰
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ persistence.py
â”œâ”€â”€ app/                        # åº”ç”¨å±‚ - æµç¨‹ç¼–æ’
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ controller.py           # é‡æ„æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ config_io.py            # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ exceptions.py           # å¼‚å¸¸å®šä¹‰
â”œâ”€â”€ analysis/                   # åˆ†æå±‚ - åå¤„ç†åˆ†æ
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ bell.py                 # Bellæ€åˆ†æ
â”‚   â”œâ”€â”€ metrics.py              # æŒ‡æ ‡è®¡ç®—
â”‚   â””â”€â”€ comparison.py           # æ–¹æ³•å¯¹æ¯”
â”œâ”€â”€ infrastructure/             # åŸºç¡€è®¾æ–½å±‚
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ persistence/            # æŒä¹…åŒ–å®ç°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ result_repository.py
â”‚   â”‚   â””â”€â”€ spectral_reporter.py # è°±åˆ†è§£æŠ¥å‘Š
â”‚   â”œâ”€â”€ visualization/          # å¯è§†åŒ–
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ reconstruction_visualizer.py
â”‚   â”‚   â”œâ”€â”€ spectral_visualizer.py # è°±åˆ†è§£å¯è§†åŒ–
â”‚   â”‚   â”œâ”€â”€ qt_adapter.py       # Qté€‚é…å™¨
â”‚   â”‚   â””â”€â”€ export.py           # å›¾åƒå¯¼å‡º
â”‚   â”œâ”€â”€ cache/                  # ç¼“å­˜ä¼˜åŒ–
â”‚   â”‚   â”œâ”€â”€ optimized_lru.py    # LRUç¼“å­˜ä¼˜åŒ–
â”‚   â”‚   â””â”€â”€ performance_comparison.py
â”‚   â””â”€â”€ io/                     # æ•°æ®IO
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ density_loader.py   # å¯†åº¦çŸ©é˜µåŠ è½½å™¨
â”œâ”€â”€ cli/                        # å‘½ä»¤è¡Œæ¥å£
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ main.py                 # CLIå…¥å£
â”œâ”€â”€ gui/                        # å›¾å½¢ç”¨æˆ·ç•Œé¢
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ __main__.py             # GUIæ¨¡å—å…¥å£
â”‚   â”œâ”€â”€ app.py                  # GUIåº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ main_window.py          # ä¸»çª—å£
â”‚   â”œâ”€â”€ panels/                 # ç•Œé¢é¢æ¿
â”‚   â”‚   â”œâ”€â”€ data_panel.py       # æ•°æ®é¢æ¿
â”‚   â”‚   â”œâ”€â”€ config_panel.py     # é…ç½®é¢æ¿
â”‚   â”‚   â”œâ”€â”€ execute_panel.py    # æ‰§è¡Œé¢æ¿
â”‚   â”‚   â”œâ”€â”€ progress_panel.py   # è¿›åº¦é¢æ¿
â”‚   â”‚   â”œâ”€â”€ summary_panel.py    # ç»“æœé¢æ¿
â”‚   â”‚   â”œâ”€â”€ figure_panel.py     # å›¾åƒé¢æ¿
â”‚   â”‚   â”œâ”€â”€ spectral_panel.py  # è°±åˆ†è§£é¢æ¿
â”‚   â”‚   â””â”€â”€ fidelity_panel.py  # ä¿çœŸåº¦é¢æ¿
â”‚   â”œâ”€â”€ services/               # GUIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ controller_runner.py # æ§åˆ¶å™¨è¿è¡Œå™¨
â”‚   â”‚   â”œâ”€â”€ spectral_runner.py  # è°±åˆ†è§£è¿è¡Œå™¨
â”‚   â”‚   â””â”€â”€ fidelity_service.py # ä¿çœŸåº¦æœåŠ¡
â”‚   â”œâ”€â”€ widgets/                # GUIç»„ä»¶
â”‚   â”‚   â””â”€â”€ image_viewer.py     # å›¾åƒæŸ¥çœ‹å™¨
â”‚   â”œâ”€â”€ domain/                 # GUIé¢†åŸŸå±‚ï¼ˆDDDï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ gui_config.py       # GUIé…ç½®é¢†åŸŸæ¨¡å‹
â”‚   â”œâ”€â”€ application/            # GUIåº”ç”¨å±‚ï¼ˆDDDï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ use_cases/
â”‚   â”‚       â””â”€â”€ gui_config_use_case.py # é…ç½®ç”¨ä¾‹
â”‚   â””â”€â”€ infrastructure/         # GUIåŸºç¡€è®¾æ–½å±‚ï¼ˆDDDï¼‰
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ repositories/
â”‚           â””â”€â”€ gui_config_repository.py # é…ç½®å­˜å‚¨
â”œâ”€â”€ visualization/              # å¯è§†åŒ–æ¨¡å—ï¼ˆå…¼å®¹å±‚ï¼‰
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ reconstruction_visualizer.py
â””â”€â”€ utils/                      # å·¥å…·æ¨¡å—ï¼ˆå¾…æ‰©å±•ï¼‰
    â””â”€â”€ __init__.py
```

---

## åˆ†å±‚è®¾è®¡

### åˆ†å±‚è®¾è®¡è¯´æ˜

æœ¬é¡¹ç›®åœ¨æ ‡å‡†DDDå››å±‚æ¶æ„åŸºç¡€ä¸Šï¼Œæ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è¿›è¡Œäº†åˆç†æ‰©å±•ï¼š

**æ ‡å‡†DDDå››å±‚**ï¼š
- æ¥å£å±‚ã€åº”ç”¨å±‚ã€é¢†åŸŸå±‚ã€åŸºç¡€è®¾æ–½å±‚

**æœ¬é¡¹ç›®å…­å±‚**ï¼š
- æ¥å£å±‚ï¼šCLIå‘½ä»¤è¡Œæ¥å£
- åº”ç”¨å±‚ï¼šä¸šåŠ¡æµç¨‹ç¼–æ’ï¼ˆcontrollerã€configï¼‰
- é¢†åŸŸå±‚ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼ˆdensityã€projectorsã€reconstructionï¼‰
- åˆ†æå±‚ï¼šåå¤„ç†åˆ†æï¼ˆbellã€metricsã€comparisonï¼‰â† ä¸šåŠ¡æ‰©å±•
- åŸºç¡€è®¾æ–½å±‚ï¼šæŠ€æœ¯å®ç°ï¼ˆpersistenceã€visualizationï¼‰
- å·¥å…·å±‚ï¼šçº¯æŠ€æœ¯å·¥å…·ï¼ˆutilsï¼‰â† æŠ€æœ¯æ‰©å±•

**æ‰©å±•ç†ç”±**ï¼š
- åˆ†æå±‚ï¼šé‡å­å±‚æä¸­åˆ†æåŠŸèƒ½ä¸šåŠ¡ä»·å€¼é«˜ï¼Œç‹¬ç«‹æˆå±‚æ›´æ¸…æ™°
- å·¥å…·å±‚ï¼šçº¯æŠ€æœ¯å·¥å…·ç‹¬ç«‹ç®¡ç†ï¼Œé¿å…æ±¡æŸ“ä¸šåŠ¡å±‚

### 1. ç”¨æˆ·æ¥å£å±‚ (Interface Layer)
**èŒè´£**: å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œæä¾›å¤šç§äº¤äº’æ–¹å¼

| æ¨¡å— | æ–‡ä»¶ | èŒè´£ | çŠ¶æ€ |
|------|------|------|------|
| **CLI** | `cli/main.py` | å‘½ä»¤è¡Œå‚æ•°è§£æã€å‘½ä»¤åˆ†å‘ | âœ… å·²å®ç° |
| **GUI** | `gui/app.py` | PySide6å›¾å½¢ç”¨æˆ·ç•Œé¢ | âœ… å·²å®ç° |
| **API** | å¾…å®ç° | REST APIæ¥å£ | â³ è®¡åˆ’ä¸­ |

**ç‰¹ç‚¹**:
- ç»Ÿä¸€çš„å‘½ä»¤æ¥å£è®¾è®¡
- æ”¯æŒæ‰¹å¤„ç†å’Œå•æ¬¡å¤„ç†
- é…ç½®é©±åŠ¨çš„å‚æ•°ç®¡ç†
- ç°ä»£åŒ–çš„GUIç•Œé¢ï¼ˆPySide6ï¼‰
- å“åº”å¼å¸ƒå±€å’Œå®æ—¶æ›´æ–°

### 2. åº”ç”¨å±‚ (Application Layer)
**èŒè´£**: ä¸šåŠ¡æµç¨‹ç¼–æ’ï¼Œåè°ƒå„é¢†åŸŸæœåŠ¡

| æ¨¡å— | æ–‡ä»¶ | èŒè´£ | æ ¸å¿ƒç±» |
|------|------|------|--------|
| **Controller** | `app/controller.py` | é‡æ„æµç¨‹æ§åˆ¶ | `ReconstructionController` |
| **Config** | `app/config_io.py` | é…ç½®ç®¡ç† | `load_config_file`, `dump_config_file` |

**æ ¸å¿ƒåŠŸèƒ½**:
- æ‰¹å¤„ç†ä»»åŠ¡è°ƒåº¦
- é…ç½®éªŒè¯ä¸è½¬æ¢
- ç»“æœæ±‡æ€»ä¸æŠ¥å‘Šç”Ÿæˆ

### 3. é¢†åŸŸå±‚ (Domain Layer)
**èŒè´£**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œé‡å­æ€é‡æ„ç®—æ³•

| æ¨¡å— | æ–‡ä»¶ | èŒè´£ | æ ¸å¿ƒç±» |
|------|------|------|--------|
| **Density** | `domain/density.py` | å¯†åº¦çŸ©é˜µå®ä½“ | `DensityMatrix` |
| **Projectors** | `domain/projectors.py` | æŠ•å½±ç®—ç¬¦ç®¡ç† | `ProjectorSet` |
| **Measurement** | `domain/measurement/` | æµ‹é‡åŸºè®¾è®¡ | `MUBProjectorSet`, `SICProjectorSet`, `NoPOVMProjectorSet` |
| **Linear** | `domain/reconstruction/linear.py` | çº¿æ€§é‡æ„ç®—æ³• | `LinearReconstructor` |
| **WLS** | `domain/reconstruction/wls.py` | åŠ æƒæœ€å°äºŒä¹˜é‡æ„ | `WLSReconstructor` |
| **RÏR Strict** | `domain/reconstruction/rhor_strict.py` | RÏR Stricté‡æ„ | `RrhoStrictReconstructor` |
| **MLE** | `domain/reconstruction/mle.py` | MLEé‡æ„ç®—æ³• | `MLEReconstructor` |
| **Spectral** | `domain/spectral_decomposition.py` | è°±åˆ†è§£åˆ†æ | `SpectralDecomposition` |

**è®¾è®¡ç‰¹ç‚¹**:
- å®ä½“-å€¼å¯¹è±¡æ¨¡å¼
- ç­–ç•¥æ¨¡å¼å®ç°ä¸åŒé‡æ„ç®—æ³•
- ç¼“å­˜æœºåˆ¶ä¼˜åŒ–æ€§èƒ½

### 4. åˆ†æå±‚ (Analysis Layer) - ä¸šåŠ¡æ‰©å±•å±‚
**èŒè´£**: åå¤„ç†åˆ†æï¼ŒæŒ‡æ ‡è®¡ç®—

| æ¨¡å— | æ–‡ä»¶ | èŒè´£ | æ ¸å¿ƒç±» |
|------|------|------|--------|
| **Bell** | `analysis/bell.py` | Bellæ€åˆ†æ | `BellAnalyzer` |
| **Metrics** | `analysis/metrics.py` | æŒ‡æ ‡è®¡ç®— | `FidelityCalculator` |
| **Comparison** | `analysis/comparison.py` | æ–¹æ³•å¯¹æ¯” | `MethodComparator` |

**åˆ†æåŠŸèƒ½**:
- ä¿çœŸåº¦è®¡ç®—
- çº ç¼ åº¦è¯„ä¼°
- é‡æ„æ–¹æ³•å¯¹æ¯”

**æ‰©å±•ç†ç”±**: é‡å­å±‚æä¸­åˆ†æåŠŸèƒ½ä¸šåŠ¡ä»·å€¼é«˜ï¼Œç‹¬ç«‹æˆå±‚æ›´æ¸…æ™°

### 5. åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)
**èŒè´£**: æŠ€æœ¯åŸºç¡€è®¾æ–½ï¼Œæ•°æ®æŒä¹…åŒ–

| æ¨¡å— | æ–‡ä»¶ | èŒè´£ | æ ¸å¿ƒç±» |
|------|------|------|--------|
| **Repository** | `infrastructure/persistence/result_repository.py` | ç»“æœå­˜å‚¨ | `ResultRepository` |
| **SpectralRepo** | `infrastructure/persistence/spectral_reporter.py` | è°±åˆ†è§£æŠ¥å‘Š | `SpectralReporter` |
| **Visualizer** | `infrastructure/visualization/reconstruction_visualizer.py` | é‡æ„å¯è§†åŒ– | `ReconstructionVisualizer` |
| **SpectralViz** | `infrastructure/visualization/spectral_visualizer.py` | è°±åˆ†è§£å¯è§†åŒ– | `SpectralVisualizer` |
| **Cache** | `infrastructure/cache/optimized_lru.py` | LRUç¼“å­˜ä¼˜åŒ– | `OptimizedLRUCache` |
| **IO** | `infrastructure/io/density_loader.py` | æ•°æ®åŠ è½½ | `DensityLoader` |

**æŠ€æœ¯ç‰¹ç‚¹**:
- æ–‡ä»¶ç³»ç»ŸæŒä¹…åŒ–
- å¤šç§æ•°æ®æ ¼å¼æ”¯æŒ
- å¯è§†åŒ–å›¾è¡¨ç”Ÿæˆ

### 6. å·¥å…·å±‚ (Utils Layer) - æŠ€æœ¯æ‰©å±•å±‚
**èŒè´£**: çº¯æŠ€æœ¯å·¥å…·ï¼Œé€šç”¨å‡½æ•°

| æ¨¡å— | æ–‡ä»¶ | èŒè´£ | æ ¸å¿ƒç±» |
|------|------|------|--------|
| **Utils** | `utils/` | å·¥å…·å‡½æ•° | å¾…æ‰©å±• |

**æ‰©å±•ç†ç”±**: çº¯æŠ€æœ¯å·¥å…·ç‹¬ç«‹ç®¡ç†ï¼Œé¿å…æ±¡æŸ“ä¸šåŠ¡å±‚

---

## æ ¸å¿ƒæ¨¡å—åˆ†æ

### 1. DensityMatrix (å¯†åº¦çŸ©é˜µå®ä½“)

**æ–‡ä»¶**: `domain/density.py`

**èŒè´£**:
- å°è£…å¯†åº¦çŸ©é˜µçš„æ•°å­¦æ“ä½œ
- æä¾›ç‰©ç†çº¦æŸéªŒè¯å’Œè¯Šæ–­
- æ”¯æŒå¤šç§ç‰©ç†åŒ–ç­–ç•¥
- ç¡®ä¿æ•°å€¼ç¨³å®šæ€§

**æ ¸å¿ƒæ–¹æ³•**:
```python
class DensityMatrix:
    def __init__(self, matrix: np.ndarray, *, 
                 enforce: Literal["within_tol", "project", "none"] = "within_tol",
                 strict: bool = False, warn: bool = True)
    def is_physical(self, tol: Optional[float] = None) -> bool     # ç‰©ç†æ€§æ£€æŸ¥
    def physical_diagnostics(self, tol: Optional[float] = None) -> dict  # è¯Šæ–­ä¿¡æ¯
    def purity(self) -> float              # çº¯åº¦è®¡ç®—
    def fidelity(self, other) -> float     # ä¿çœŸåº¦è®¡ç®—
    
    @classmethod
    def project_to_physical(cls, matrix: np.ndarray, *, 
                           tolerance: float = 1e-10, 
                           return_diag: bool = False) -> Union[np.ndarray, Tuple[np.ndarray, dict]]
```

**ç‰©ç†åŒ–ç­–ç•¥**:
- `within_tol`: å®¹å·®å†…ç‰©ç†åŒ–ï¼ˆé»˜è®¤ï¼Œæ•°å€¼ç¨³å®šæ€§å¤„ç†ï¼‰
- `project`: å¼ºåˆ¶ç‰©ç†æŠ•å½±ï¼ˆå¤„ç†æ‰€æœ‰éç‰©ç†è¾“å…¥ï¼‰
- `none`: ä¸å¤„ç†ï¼ˆè°ƒè¯•æ¨¡å¼ï¼Œä¿æŒåŸå§‹è¾“å…¥ï¼‰

**è®¾è®¡æ¨¡å¼**: å®ä½“æ¨¡å¼ + ç­–ç•¥æ¨¡å¼ + å·¥å‚æ¨¡å¼

### 2. ProjectorSet (æŠ•å½±ç®—ç¬¦é›†åˆ)

**æ–‡ä»¶**: `domain/projectors.py`

**èŒè´£**:
- ç”Ÿæˆæµ‹é‡åŸºå’ŒæŠ•å½±ç®—ç¬¦
- å®ç°ç¼“å­˜æœºåˆ¶
- æä¾›æµ‹é‡çŸ©é˜µ

**æ ¸å¿ƒæ–¹æ³•**:
```python
class ProjectorSet:
    def __init__(self, dimension: int, cache: bool = True)
    def bases(self) -> np.ndarray          # æµ‹é‡åŸº
    def projectors(self) -> np.ndarray     # æŠ•å½±ç®—ç¬¦
    def measurement_matrix(self) -> np.ndarray  # æµ‹é‡çŸ©é˜µ
```

**è®¾è®¡æ¨¡å¼**: å•ä¾‹æ¨¡å¼ + ç¼“å­˜ç­–ç•¥

### 3. ReconstructionController (é‡æ„æ§åˆ¶å™¨)

**æ–‡ä»¶**: `app/controller.py`

**èŒè´£**:
- åè°ƒé‡æ„æµç¨‹
- ç®¡ç†æ‰¹å¤„ç†ä»»åŠ¡
- ç»“æœæ±‡æ€»ä¸æŒä¹…åŒ–

**æ ¸å¿ƒæ–¹æ³•**:
```python
class ReconstructionController:
    def run_batch(self, config: ReconstructionConfig) -> List[SummaryResult]
    def run_single(self, probabilities: np.ndarray, config: ReconstructionConfig) -> SummaryResult
    def _reconstruct_single(self, probabilities: np.ndarray, method: str) -> ReconstructionResult
```

**è®¾è®¡æ¨¡å¼**: æ§åˆ¶å™¨æ¨¡å¼ + ç­–ç•¥æ¨¡å¼

### 4. WLSReconstructor (åŠ æƒæœ€å°äºŒä¹˜é‡æ„å™¨)

**æ–‡ä»¶**: `domain/reconstruction/wls.py`

**èŒè´£**:
- å®ç°åŠ æƒæœ€å°äºŒä¹˜é‡æ„
- æ”¯æŒL-BFGS-Bä¼˜åŒ–ç®—æ³•
- æ”¯æŒæ­£åˆ™åŒ–é€‰é¡¹

**æ ¸å¿ƒæ–¹æ³•**:
```python
class WLSReconstructor:
    def reconstruct(self, probabilities: np.ndarray, 
                    initial_density: Optional[DensityMatrix] = None) -> DensityMatrix
    def reconstruct_with_details(self, probabilities: np.ndarray) -> WLSReconstructionResult
    def _objective_function(self, params: np.ndarray, probs: np.ndarray, 
                           projectors: np.ndarray, regularization: Optional[float]) -> float
```

**è®¾è®¡æ¨¡å¼**: ç­–ç•¥æ¨¡å¼ + æ¨¡æ¿æ–¹æ³•æ¨¡å¼

### 5. RrhoStrictReconstructor (RÏR Stricté‡æ„å™¨)

**æ–‡ä»¶**: `domain/reconstruction/rhor_strict.py`

**èŒè´£**:
- å®ç°ä¸¥æ ¼RÏRé‡æ„ç®—æ³•
- ä½¿ç”¨H-sandwichå½’ä¸€åŒ–
- æ”¯æŒç¨€é‡Šè¿­ä»£é€‰é¡¹

**æ ¸å¿ƒæ–¹æ³•**:
```python
class RrhoStrictReconstructor:
    def reconstruct(self, counts_or_probs: np.ndarray) -> DensityMatrix
    def reconstruct_with_details(self, counts_or_probs: np.ndarray) -> RrhoStrictReconstructionResult
    def _iterate_rrr_sigma(self, E_tilde: np.ndarray, f: np.ndarray, 
                          sigma0: np.ndarray) -> Tuple[np.ndarray, ...]
```

**è®¾è®¡æ¨¡å¼**: ç­–ç•¥æ¨¡å¼ + æ¨¡æ¿æ–¹æ³•æ¨¡å¼

### 6. MLEReconstructor (MLEé‡æ„å™¨)

**æ–‡ä»¶**: `domain/reconstruction/mle.py`

**èŒè´£**:
- å®ç°æœ€å¤§ä¼¼ç„¶ä¼°è®¡é‡æ„
- ä½¿ç”¨Choleskyå‚æ•°åŒ–ä¿è¯æ­£å®šæ€§
- æ”¯æŒå¤šç§ä¼˜åŒ–ç®—æ³•

**æ ¸å¿ƒæ–¹æ³•**:
```python
class MLEReconstructor:
    def reconstruct(self, probabilities: np.ndarray) -> MLEReconstructionResult
    def _objective_function(self, params: np.ndarray) -> float
    def _expected_probabilities(self, rho: np.ndarray) -> np.ndarray
```

**è®¾è®¡æ¨¡å¼**: ç­–ç•¥æ¨¡å¼ + æ¨¡æ¿æ–¹æ³•æ¨¡å¼

### 7. SpectralDecomposition (è°±åˆ†è§£åˆ†æ)

**æ–‡ä»¶**: `domain/spectral_decomposition.py`

**èŒè´£**:
- å¯†åº¦çŸ©é˜µç‰¹å¾å€¼åˆ†è§£
- ç‰¹å¾å‘é‡åˆ†æ
- æ”¯æŒç†è®ºæ€å¯¹æ¯”

**æ ¸å¿ƒæ–¹æ³•**:
```python
class SpectralDecomposition:
    def decompose(self, density: DensityMatrix) -> SpectralResult
    def compare_with_theoretical(self, density: DensityMatrix, 
                                theoretical: DensityMatrix) -> ComparisonResult
```

**è®¾è®¡æ¨¡å¼**: ç­–ç•¥æ¨¡å¼

### 8. MainWindow (GUIä¸»çª—å£)

**æ–‡ä»¶**: `gui/main_window.py`

**èŒè´£**:
- ç®¡ç†GUIä¸»çª—å£å¸ƒå±€
- åè°ƒå„ä¸ªé¢æ¿ç»„ä»¶
- å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶

**æ ¸å¿ƒæ–¹æ³•**:
```python
class MainWindow(QtWidgets.QMainWindow):
    def __init__(self) -> None
    def _create_central_widgets(self) -> None
    def _trigger_run(self) -> None
    def _on_runner_progress(self, progress: ProgressEvent) -> None
```

**è®¾è®¡æ¨¡å¼**: MVCæ¨¡å¼ + è§‚å¯Ÿè€…æ¨¡å¼

### 9. GUIé¢æ¿ç»„ä»¶

**æ–‡ä»¶**: `gui/panels/`

**èŒè´£**:
- æ•°æ®é¢æ¿ï¼šæ–‡ä»¶é€‰æ‹©å’Œå…ƒæ•°æ®æ˜¾ç¤º
- é…ç½®é¢æ¿ï¼šå‚æ•°è®¾ç½®å’ŒéªŒè¯
- æ‰§è¡Œé¢æ¿ï¼šä»»åŠ¡æ§åˆ¶å’ŒçŠ¶æ€ç®¡ç†
- è¿›åº¦é¢æ¿ï¼šå®æ—¶è¿›åº¦æ˜¾ç¤º
- ç»“æœé¢æ¿ï¼šç»“æœæ±‡æ€»å’Œå±•ç¤º
- å›¾åƒé¢æ¿ï¼šå¯è§†åŒ–å›¾è¡¨æ˜¾ç¤º
- è°±åˆ†è§£é¢æ¿ï¼šç‰¹å¾å€¼åˆ†è§£ç»“æœå±•ç¤º
- ä¿çœŸåº¦é¢æ¿ï¼šä¿çœŸåº¦è®¡ç®—å’Œå¯¹æ¯”

**æ ¸å¿ƒç»„ä»¶**:
```python
class DataPanel(QtWidgets.QWidget):
    dataset_changed = QtCore.Signal(Path)
    def set_file(self, path: Path) -> None

class ConfigPanel(QtWidgets.QWidget):
    config_changed = QtCore.Signal(ReconstructionConfig)
    def get_config(self) -> ReconstructionConfig

class ExecutePanel(QtWidgets.QWidget):
    run_requested = QtCore.Signal()
    cancel_requested = QtCore.Signal()
```

**è®¾è®¡æ¨¡å¼**: è§‚å¯Ÿè€…æ¨¡å¼ + ç»„ä»¶æ¨¡å¼

---

## è®¾è®¡æ¨¡å¼åº”ç”¨

### 1. DDD-liteæ¶æ„æ¨¡å¼
**åº”ç”¨**: æ•´ä¸ªç³»ç»Ÿé‡‡ç”¨DDD-liteï¼ˆè½»é‡çº§é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰æ¶æ„
- **ä¼˜åŠ¿**: èŒè´£åˆ†ç¦»ï¼Œæ˜“äºç»´æŠ¤å’Œæµ‹è¯•ï¼Œä»¥é¢†åŸŸæ¨¡å‹ä¸ºæ ¸å¿ƒï¼Œé€‚åˆä¸­å°å‹é¡¹ç›®
- **å®ç°**: æ¯å±‚åªä¾èµ–ä¸‹å±‚ï¼Œé¿å…å¾ªç¯ä¾èµ–ï¼Œé¢†åŸŸå±‚å°è£…æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

### 2. ç­–ç•¥æ¨¡å¼
**åº”ç”¨**: é‡æ„ç®—æ³•é€‰æ‹©ä¸æŠ•å½±ç®—ç¬¦æ„é€ 
```python
# é‡æ„ç­–ç•¥é€‰æ‹©
if method == "linear":
    reconstructor = LinearReconstructor(dimension, design=design)
elif method == "wls":
    reconstructor = WLSReconstructor(dimension, design=design)
elif method == "rhor_strict":
    reconstructor = RrhoStrictReconstructor(dimension, design=design)
elif method == "mle":
    reconstructor = MLEReconstructor(dimension, design=design)

# æµ‹é‡åŸºè®¾è®¡ç­–ç•¥é€‰æ‹©
if design == "mub":
    projector_set = ProjectorSet.get(dimension, design="mub")  # MUBæµ‹é‡åŸº
elif design == "sic":
    projector_set = ProjectorSet.get(dimension, design="sic")  # SIC-POVMæµ‹é‡åŸº
elif design == "nopovm":
    projector_set = ProjectorSet.get(dimension, design="nopovm")  # NoPOVMæµ‹é‡åŸº
```

### 3. å·¥å‚æ¨¡å¼
**åº”ç”¨**: é…ç½®å¯¹è±¡åˆ›å»º
```python
def create_config(data: dict) -> ReconstructionConfig:
    return ReconstructionConfig(**data)
```

### 4. å•ä¾‹æ¨¡å¼ + LRUç¼“å­˜
**åº”ç”¨**: æŠ•å½±ç®—ç¬¦ç¼“å­˜ï¼ˆå·²ä¼˜åŒ–ä¸ºLRUç¼“å­˜ï¼‰
```python
class ProjectorSet:
    _CACHE: ClassVar[dict] = {}  # ç±»çº§ç¼“å­˜ï¼ˆå·²è¿ç§»åˆ°LRUç¼“å­˜ï¼‰
    
# ä¼˜åŒ–åçš„LRUç¼“å­˜
from qtomography.infrastructure.cache import OptimizedLRUCache
cache = OptimizedLRUCache(maxsize=100)
```

### 5. æ¨¡æ¿æ–¹æ³•æ¨¡å¼
**åº”ç”¨**: é‡æ„æµç¨‹æ ‡å‡†åŒ–
```python
def reconstruct(self, probabilities):
    # 1. éªŒè¯è¾“å…¥
    # 2. é€‰æ‹©ç®—æ³•
    # 3. æ‰§è¡Œé‡æ„
    # 4. éªŒè¯ç»“æœ
    # 5. è¿”å›ç»“æœ
```

### 6. MVCæ¨¡å¼ + GUIå†…éƒ¨DDDæ¶æ„
**åº”ç”¨**: GUIç•Œé¢åˆ†ç¦»ï¼ŒGUIå†…éƒ¨é‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡
```python
# Model: æ•°æ®æ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘
class ReconstructionConfig:
    def __init__(self, method: str, dimension: int, ...)

# View: ç•Œé¢ç»„ä»¶
class DataPanel(QtWidgets.QWidget):
    def set_file(self, path: Path) -> None

# Controller: æ§åˆ¶å™¨åè°ƒ
class MainWindow(QtWidgets.QMainWindow):
    def _trigger_run(self) -> None

# GUIå†…éƒ¨DDDæ¶æ„
# Domain: GUIé…ç½®é¢†åŸŸæ¨¡å‹
class GUIConfig:  # qtomography/gui/domain/gui_config.py
    def __init__(self, ...)

# Application: ç”¨ä¾‹å±‚
class GUIConfigUseCase:  # qtomography/gui/application/use_cases/gui_config_use_case.py
    def save_config(self, config: GUIConfig) -> None

# Infrastructure: å­˜å‚¨å®ç°
class GUIConfigRepository:  # qtomography/gui/infrastructure/repositories/gui_config_repository.py
    def save(self, config: GUIConfig) -> None
```

### 7. è§‚å¯Ÿè€…æ¨¡å¼
**åº”ç”¨**: GUIäº‹ä»¶å¤„ç†ï¼ˆQtä¿¡å·æ§½æœºåˆ¶ï¼‰
```python
class ExecutePanel(QtWidgets.QWidget):
    run_requested = QtCore.Signal()  # ä¿¡å·å®šä¹‰
    
    def _on_run_clicked(self):
        self.run_requested.emit()    # ä¿¡å·å‘å°„

class MainWindow(QtWidgets.QMainWindow):
    def _connect_execute_panel(self):
        self.execute_panel.run_requested.connect(self._trigger_run)  # ä¿¡å·è¿æ¥
```

---

## æ•°æ®æµåˆ†æ

### 1. é‡æ„æ•°æ®æµ
```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant CLI as CLIæ¥å£
    participant GUI as GUIç•Œé¢
    participant Controller as æ§åˆ¶å™¨
    participant Reconstructor as é‡æ„å™¨
    participant Repository as å­˜å‚¨åº“
    
    User->>CLI: è¾“å…¥å‘½ä»¤
    User->>GUI: ç‚¹å‡»æŒ‰é’®
    CLI->>Controller: è§£æé…ç½®
    GUI->>Controller: ä¼ é€’é…ç½®
    Controller->>Reconstructor: æ‰§è¡Œé‡æ„
    Reconstructor->>Controller: è¿”å›ç»“æœ
    Controller->>Repository: ä¿å­˜ç»“æœ
    Repository->>Controller: ç¡®è®¤ä¿å­˜
    Controller->>CLI: è¿”å›æ±‡æ€»
    Controller->>GUI: æ›´æ–°ç•Œé¢
    CLI->>User: æ˜¾ç¤ºç»“æœ
    GUI->>User: æ˜¾ç¤ºç»“æœ
```

### 2. æ‰¹å¤„ç†æ•°æ®æµ

```mermaid
graph LR
    A[CSVæ–‡ä»¶] --> B[æ•°æ®åŠ è½½]
    B --> C[é…ç½®éªŒè¯]
    C --> D[æ‰¹å¤„ç†å¾ªç¯]
    D --> E[å•æ¬¡é‡æ„]
    E --> F[ç»“æœæ”¶é›†]
    F --> G[JSONè®°å½•]
    F --> H[CSVæ±‡æ€»]
    G --> I[å¯è§†åŒ–]
    H --> I
```

### 3. GUIäº‹ä»¶æµ
```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant GUI as GUIç•Œé¢
    participant Controller as æ§åˆ¶å™¨
    participant Runner as è¿è¡Œå™¨
    
    User->>GUI: é€‰æ‹©æ–‡ä»¶
    GUI->>GUI: æ›´æ–°æ•°æ®é¢æ¿
    User->>GUI: è®¾ç½®å‚æ•°
    GUI->>GUI: æ›´æ–°é…ç½®é¢æ¿
    User->>GUI: ç‚¹å‡»è¿è¡Œ
    GUI->>Runner: å¯åŠ¨ä»»åŠ¡
    Runner->>Controller: æ‰§è¡Œé‡æ„
    Controller->>Runner: è¿›åº¦æ›´æ–°
    Runner->>GUI: ä¿¡å·é€šçŸ¥
    GUI->>User: æ›´æ–°è¿›åº¦æ¡
    Runner->>GUI: å®Œæˆé€šçŸ¥
    GUI->>User: æ˜¾ç¤ºç»“æœ
```

### 4. ç¼“å­˜æ•°æ®æµ
```mermaid
graph TD
    A[è¯·æ±‚æŠ•å½±ç®—ç¬¦] --> B{ç¼“å­˜å‘½ä¸­?}
    B -->|æ˜¯| C[è¿”å›ç¼“å­˜æ•°æ®]
    B -->|å¦| D[è®¡ç®—æŠ•å½±ç®—ç¬¦]
    D --> E[å­˜å‚¨åˆ°ç¼“å­˜]
    E --> F[è¿”å›è®¡ç®—ç»“æœ]
```

---

## ä¾èµ–å…³ç³»å›¾

### æ¨¡å—ä¾èµ–å…³ç³»
```mermaid
graph TD
    subgraph "CLIå±‚"
        CLI[cli/main.py]
    end
    
    subgraph "åº”ç”¨å±‚"
        Controller[app/controller.py]
        Config[app/config_io.py]
    end
    
    subgraph "é¢†åŸŸå±‚"
        Density[domain/density.py]
        Projectors[domain/projectors.py]
        Measurement[domain/measurement/]
        Linear[domain/reconstruction/linear.py]
        WLS[domain/reconstruction/wls.py]
        RrhoR[domain/reconstruction/rhor_strict.py]
        MLE[domain/reconstruction/mle.py]
        Spectral[domain/spectral_decomposition.py]
        Repo[domain/persistence/result_repository.py]
    end
    
    subgraph "åˆ†æå±‚"
        Bell[analysis/bell.py]
        Metrics[analysis/metrics.py]
        Comparison[analysis/comparison.py]
    end
    
    subgraph "åŸºç¡€è®¾æ–½å±‚"
        InfraRepo[infrastructure/persistence/result_repository.py]
        SpectralRepo[infrastructure/persistence/spectral_reporter.py]
        Visualizer[infrastructure/visualization/reconstruction_visualizer.py]
        SpectralViz[infrastructure/visualization/spectral_visualizer.py]
        Cache[infrastructure/cache/optimized_lru.py]
        IO[infrastructure/io/density_loader.py]
    end
    
    CLI --> Controller
    CLI --> Config
    Controller --> Linear
    Controller --> WLS
    Controller --> RrhoR
    Controller --> MLE
    Controller --> Spectral
    Controller --> Repo
    Controller --> SpectralRepo
    Linear --> Density
    WLS --> Density
    RrhoR --> Density
    MLE --> Density
    Linear --> Projectors
    WLS --> Projectors
    RrhoR --> Projectors
    MLE --> Projectors
    Projectors --> Measurement
    Repo --> Bell
    Bell --> Metrics
    Metrics --> Comparison
    Controller --> Visualizer
    Controller --> SpectralViz
    Projectors --> Cache
```

### ç±»ä¾èµ–å…³ç³»
```mermaid
classDiagram
    class ReconstructionController {
        +run_batch(config)
        +run_single(probabilities, config)
    }
    
    class LinearReconstructor {
        +reconstruct(probabilities)
        +reconstruct_with_details(probabilities)
    }
    
    class WLSReconstructor {
        +reconstruct(probabilities, initial_density)
        +reconstruct_with_details(probabilities)
    }
    
    class RrhoStrictReconstructor {
        +reconstruct(counts_or_probs)
        +reconstruct_with_details(counts_or_probs)
    }
    
    class MLEReconstructor {
        +reconstruct(probabilities)
        +reconstruct_with_details(probabilities)
    }
    
    class SpectralDecomposition {
        +decompose(density)
        +compare_with_theoretical(density, theoretical)
    }
    
    class DensityMatrix {
        +is_physical(tol)
        +physical_diagnostics(tol)
        +purity()
        +fidelity(other)
        +project_to_physical(matrix)
    }
    
    class ProjectorSet {
        +bases()
        +projectors()
        +measurement_matrix()
    }
    
    class ResultRepository {
        +save(record)
        +load(record_id)
    }
    
    ReconstructionController --> LinearReconstructor
    ReconstructionController --> WLSReconstructor
    ReconstructionController --> RrhoStrictReconstructor
    ReconstructionController --> MLEReconstructor
    ReconstructionController --> SpectralDecomposition
    LinearReconstructor --> DensityMatrix
    WLSReconstructor --> DensityMatrix
    RrhoStrictReconstructor --> DensityMatrix
    MLEReconstructor --> DensityMatrix
    LinearReconstructor --> ProjectorSet
    WLSReconstructor --> ProjectorSet
    RrhoStrictReconstructor --> ProjectorSet
    MLEReconstructor --> ProjectorSet
    ProjectorSet --> MUBProjectorSet
    ProjectorSet --> SICProjectorSet
    ProjectorSet --> NoPOVMProjectorSet
    ReconstructionController --> ResultRepository
    ReconstructionController --> SpectralReporter
```

---

## æ¶æ„ä¼˜åŠ¿

### 1. å¯ç»´æŠ¤æ€§
- **åˆ†å±‚æ¸…æ™°**: æ¯å±‚èŒè´£æ˜ç¡®ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹
- **æ¨¡å—åŒ–è®¾è®¡**: é«˜å†…èšï¼Œä½è€¦åˆ
- **ç»Ÿä¸€æ¥å£**: æ ‡å‡†åŒ–çš„APIè®¾è®¡
- **GUIåˆ†ç¦»**: MVCæ¨¡å¼ä½¿ç•Œé¢ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»

### 2. å¯æ‰©å±•æ€§
- **ç­–ç•¥æ¨¡å¼**: æ˜“äºæ·»åŠ æ–°çš„é‡æ„ç®—æ³•å’ŒæŠ•å½±ç®—ç¬¦æ„é€ æ–¹æ³•
- **æ’ä»¶æ¶æ„**: æ”¯æŒåŠŸèƒ½æ¨¡å—çš„ç‹¬ç«‹å¼€å‘
- **é…ç½®é©±åŠ¨**: é€šè¿‡é…ç½®æ–‡ä»¶æ§åˆ¶è¡Œä¸º
- **æ¥å£æŠ½è±¡**: ç»Ÿä¸€çš„æ¥å£è®¾è®¡æ”¯æŒç®—æ³•å’ŒæŠ•å½±ç®—ç¬¦çš„çµæ´»æ›¿æ¢
- **GUIç»„ä»¶åŒ–**: é¢æ¿ç»„ä»¶ç‹¬ç«‹ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½

### 3. å¯æµ‹è¯•æ€§
- **ä¾èµ–æ³¨å…¥**: ä¾¿äºå•å…ƒæµ‹è¯•
- **æ¥å£æŠ½è±¡**: æ”¯æŒMockæµ‹è¯•
- **é«˜è¦†ç›–ç‡**: 90%+çš„æµ‹è¯•è¦†ç›–ç‡

### 4. æ€§èƒ½ä¼˜åŒ–
- **LRUç¼“å­˜æœºåˆ¶**: æŠ•å½±ç®—ç¬¦LRUç¼“å­˜ä¼˜åŒ–ï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œæ”¯æŒå†…å­˜ç®¡ç†
- **æ‰¹å¤„ç†**: æ”¯æŒå¤šæ ·æœ¬å¹¶è¡Œå¤„ç†
- **å†…å­˜ç®¡ç†**: åˆç†çš„å†…å­˜ä½¿ç”¨ç­–ç•¥ï¼Œç¼“å­˜å¤§å°é™åˆ¶
- **å¼‚æ­¥å¤„ç†**: GUIä½¿ç”¨å¼‚æ­¥ä»»åŠ¡é¿å…ç•Œé¢å¡é¡¿
- **ä¼˜åŒ–ç®—æ³•**: WLSå’ŒRÏR Strictæ”¯æŒå¤šç§ä¼˜åŒ–å™¨é€‰æ‹©

---

## æ”¹è¿›å»ºè®®

### 1. çŸ­æœŸæ”¹è¿› (1-2å‘¨)

#### 1.1 å®Œå–„åŸºç¡€è®¾æ–½å±‚
```python
# å»ºè®®æ·»åŠ çš„æ¨¡å—
qtomography/infrastructure/
â”œâ”€â”€ logging/           # ç»Ÿä¸€æ—¥å¿—ç®¡ç†
â”œâ”€â”€ monitoring/        # æ€§èƒ½ç›‘æ§
â”œâ”€â”€ validation/        # æ•°æ®éªŒè¯
â””â”€â”€ exceptions/        # å¼‚å¸¸å¤„ç†
```

#### 1.2 å¢å¼ºé”™è¯¯å¤„ç†
```python
class ReconstructionError(Exception):
    """é‡æ„è¿‡ç¨‹å¼‚å¸¸åŸºç±»"""
    pass

class InvalidInputError(ReconstructionError):
    """è¾“å…¥æ•°æ®æ— æ•ˆå¼‚å¸¸"""
    pass

class ConvergenceError(ReconstructionError):
    """ç®—æ³•æ”¶æ•›å¼‚å¸¸"""
    pass
```

### 2. ä¸­æœŸæ”¹è¿› (1-2æœˆ)

#### 2.1 æ‰©å±•æŠ•å½±ç®—ç¬¦æ„é€ æ–¹æ³•
```python
# æ”¯æŒå¤šç§æŠ•å½±ç®—ç¬¦æ„é€ ç­–ç•¥
class ProjectorSetFactory:
    @staticmethod
    def create_projector_set(dimension: int, projector_type: str):
        if projector_type == "standard":
            return StandardProjectorSet(dimension)
        elif projector_type == "sic":
            return SICProjectorSet(dimension)
        elif projector_type == "mub":
            return MUBProjectorSet(dimension)
        else:
            raise ValueError(f"Unsupported projector type: {projector_type}")

# æ–°å¢æŠ•å½±ç®—ç¬¦ç±»å‹
class SICProjectorSet(ProjectorSet):
    """SIC-POVMæŠ•å½±ç®—ç¬¦é›†åˆ"""
    pass

class MUBProjectorSet(ProjectorSet):
    """MUBæŠ•å½±ç®—ç¬¦é›†åˆ"""
    pass
```

#### 2.2 æ‰©å±•é‡æ„ç®—æ³•
```python
# æ–°å¢é‡æ„ç®—æ³•
class BayesianReconstructor(BaseReconstructor):
    """è´å¶æ–¯é‡æ„ç®—æ³•"""
    pass

class NeuralReconstructor(BaseReconstructor):
    """ç¥ç»ç½‘ç»œé‡æ„ç®—æ³•"""
    pass

# ç®—æ³•æ³¨å†Œè¡¨
RECONSTRUCTION_ALGORITHMS = {
    "linear": LinearReconstructor,
    "mle": MLEReconstructor,
    "bayesian": BayesianReconstructor,
    "neural": NeuralReconstructor,
}
```

#### 2.3 å®ç°å¤šè¿›ç¨‹æ‰¹å¤„ç†
```python
# åŸºäºmultiprocessingçš„å¹¶è¡Œå¤„ç†
class ParallelReconstructionController:
    def run_batch_parallel(self, config: ReconstructionConfig, 
                          processes: int = 4) -> List[SummaryResult]:
        # å®ç°å¤šè¿›ç¨‹æ‰¹å¤„ç†
        pass
```

#### 2.4 æ·»åŠ æ•°æ®åº“æ”¯æŒ
```python
# æ”¯æŒSQLite/PostgreSQL
class DatabaseResultRepository(ResultRepository):
    def __init__(self, connection_string: str):
        # æ•°æ®åº“è¿æ¥
        pass
```

### 3. é•¿æœŸæ”¹è¿› (3-6æœˆ)

#### 3.1 å¾®æœåŠ¡æ¶æ„
```python
# æ‹†åˆ†ä¸ºç‹¬ç«‹çš„å¾®æœåŠ¡
- reconstruction-service    # é‡æ„æœåŠ¡
- analysis-service         # åˆ†ææœåŠ¡
- visualization-service    # å¯è§†åŒ–æœåŠ¡
- storage-service          # å­˜å‚¨æœåŠ¡
```

#### 3.2 äº‘åŸç”Ÿæ”¯æŒ
```python
# æ”¯æŒDockerå®¹å™¨åŒ–
# æ”¯æŒKuberneteséƒ¨ç½²
# æ”¯æŒäº‘å­˜å‚¨é›†æˆ
```

---

## æ€»ç»“

### æ¶æ„è¯„ä»·
| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **å¯ç»´æŠ¤æ€§** | â­â­â­â­â­ | åˆ†å±‚æ¸…æ™°ï¼Œæ¨¡å—åŒ–ç¨‹åº¦é«˜ï¼ŒGUIåˆ†ç¦» |
| **å¯æ‰©å±•æ€§** | â­â­â­â­â­ | ç­–ç•¥æ¨¡å¼æ”¯æŒç®—æ³•æ‰©å±•ï¼ŒGUIç»„ä»¶åŒ– |
| **å¯æµ‹è¯•æ€§** | â­â­â­â­â­ | é«˜è¦†ç›–ç‡ï¼Œæ¥å£è®¾è®¡è‰¯å¥½ |
| **æ€§èƒ½** | â­â­â­â­ | ç¼“å­˜æœºåˆ¶ï¼Œæ‰¹å¤„ç†æ”¯æŒï¼Œå¼‚æ­¥GUI |
| **ç”¨æˆ·ä½“éªŒ** | â­â­â­â­â­ | ç°ä»£åŒ–GUIç•Œé¢ï¼Œå“åº”å¼è®¾è®¡ |
| **æ–‡æ¡£å®Œæ•´æ€§** | â­â­â­â­â­ | æ–‡æ¡£è¯¦ç»†ï¼Œç¤ºä¾‹ä¸°å¯Œ |

### æŠ€æœ¯äº®ç‚¹
1. **DDD-liteæ¶æ„**: æ¸…æ™°çš„èŒè´£åˆ†ç¦»ï¼Œä»¥é¢†åŸŸæ¨¡å‹ä¸ºæ ¸å¿ƒï¼Œé€‚åˆä¸­å°å‹é¡¹ç›®
2. **GUIå†…éƒ¨DDD**: GUIå±‚é‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼Œdomain/application/infrastructureåˆ†å±‚æ¸…æ™°
3. **å¤šç®—æ³•æ”¯æŒ**: Linearã€WLSã€RÏR Strictã€MLEå››ç§é‡æ„ç®—æ³•ï¼Œæ”¯æŒå¤šç§æµ‹é‡åŸºè®¾è®¡
4. **è®¾è®¡æ¨¡å¼**: ç­–ç•¥ã€å·¥å‚ã€å•ä¾‹ã€MVCã€è§‚å¯Ÿè€…ç­‰æ¨¡å¼åº”ç”¨
5. **LRUç¼“å­˜ä¼˜åŒ–**: æŠ•å½±ç®—ç¬¦LRUç¼“å­˜æå‡æ€§èƒ½ï¼Œæ”¯æŒå†…å­˜ç®¡ç†
6. **è°±åˆ†è§£åˆ†æ**: å®Œæ•´çš„ç‰¹å¾å€¼åˆ†è§£å’Œå¯è§†åŒ–åŠŸèƒ½
7. **æµ‹è¯•è¦†ç›–**: 36+æµ‹è¯•ç”¨ä¾‹ï¼Œä¸MATLABåŸºå‡†å¯¹é½ï¼ˆè¯¯å·® < 1e-10ï¼‰
8. **ç°ä»£åŒ–GUI**: PySide6æ¡Œé¢åº”ç”¨ï¼Œå“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå®æ—¶è¿›åº¦å’Œäº¤äº’å¼å¯è§†åŒ–
9. **æ–‡æ¡£å®Œå–„**: è¯¦ç»†çš„æŠ€æœ¯æ–‡æ¡£å’Œæ•™å­¦ææ–™

### æ¶æ„å®šä½è¯´æ˜
æœ¬é¡¹ç›®é‡‡ç”¨çš„æ˜¯**DDD-liteï¼ˆè½»é‡çº§é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰+ MVC**ï¼Œè€Œéå®Œæ•´çš„DDDï¼š
- **ä¼˜åŠ¿**: ç»“æ„æ¸…æ™°ã€æ˜“äºç†è§£ã€é€‚åˆä¸­å°å‹é¡¹ç›®ï¼Œå¹³è¡¡å¤æ‚åº¦å’Œå®ç”¨æ€§
- **ç‰¹ç‚¹**: é¢†åŸŸæ¨¡å‹ + åˆ†å±‚æ¶æ„ + è®¾è®¡æ¨¡å¼ + GUIåˆ†ç¦»
- **é€‚ç”¨æ€§**: å®Œå…¨æ»¡è¶³ç§‘ç ”ã€æ•™å­¦ã€åŸå‹å¼€å‘éœ€æ±‚
- **æ‰©å±•æ€§**: æ”¯æŒæœªæ¥å‘å®Œæ•´DDDæ¼”è¿›
- **GUIæ”¯æŒ**: ç°ä»£åŒ–æ¡Œé¢åº”ç”¨ï¼Œç”¨æˆ·ä½“éªŒä¼˜ç§€

### é€‚ç”¨åœºæ™¯
- **ç§‘ç ”é¡¹ç›®**: é‡å­æ€å±‚æç ”ç©¶ï¼Œæ”¯æŒå¤šç§é‡æ„ç®—æ³•å’Œæµ‹é‡åŸºè®¾è®¡
- **æ•™å­¦å·¥å…·**: é‡å­ä¿¡æ¯å­¦æ•™å­¦ï¼Œå®Œæ•´çš„æ–‡æ¡£å’Œå¯è§†åŒ–
- **åŸå‹å¼€å‘**: å¿«é€Ÿç®—æ³•éªŒè¯ï¼Œçµæ´»çš„é…ç½®å’Œæ‰¹å¤„ç†
- **ç”Ÿäº§ç¯å¢ƒ**: æ‰¹å¤„ç†æ•°æ®åˆ†æï¼Œç»“æœæŒä¹…åŒ–å’ŒæŠ¥å‘Šç”Ÿæˆ
- **æ¡Œé¢åº”ç”¨**: ç°ä»£åŒ–GUIç•Œé¢ï¼Œé€‚åˆå®éªŒå®¤ä½¿ç”¨ï¼Œæ”¯æŒå®æ—¶è¿›åº¦å’Œäº¤äº’å¼å¯è§†åŒ–
- **ç®—æ³•å¯¹æ¯”**: å¤šç§é‡æ„ç®—æ³•å’Œæµ‹é‡åŸºè®¾è®¡çš„æ€§èƒ½å¯¹æ¯”åˆ†æ

### æ¶æ„æ¼”è¿›è¯´æ˜
æœ¬é¡¹ç›®ä»v0.6.0-alphaæ¼”è¿›åˆ°v1.0.0ï¼Œä¸»è¦æ”¹è¿›åŒ…æ‹¬ï¼š
- âœ… **ç®—æ³•æ‰©å±•**: ä»Linear+MLEæ‰©å±•åˆ°Linear+WLS+RÏR Strict+MLE
- âœ… **æµ‹é‡åŸºæ‰©å±•**: æ”¯æŒMUBã€SICã€NoPOVMç­‰å¤šç§æµ‹é‡è®¾è®¡
- âœ… **GUIæ¶æ„ä¼˜åŒ–**: GUIå†…éƒ¨é‡‡ç”¨DDDæ¶æ„ï¼Œdomain/application/infrastructureåˆ†å±‚
- âœ… **åŸºç¡€è®¾æ–½å®Œå–„**: æ·»åŠ ç¼“å­˜ä¼˜åŒ–ã€æ•°æ®IOã€è°±åˆ†è§£å¯è§†åŒ–ç­‰æ¨¡å—
- âœ… **åŠŸèƒ½å¢å¼º**: è°±åˆ†è§£åˆ†æã€ä¿çœŸåº¦é¢æ¿ã€å›¾åƒæŸ¥çœ‹å™¨ç­‰æ–°åŠŸèƒ½

è¿™ä¸ªæ¶æ„è®¾è®¡ä½“ç°äº†ç°ä»£Pythoné¡¹ç›®çš„æœ€ä½³å®è·µï¼Œæ—¢ä¿è¯äº†ä»£ç è´¨é‡ï¼Œåˆå…·å¤‡äº†è‰¯å¥½çš„æ‰©å±•æ€§ã€‚ä½œä¸ºDDD-lite + MVCæ¶æ„ï¼Œå®ƒå®Œç¾å¹³è¡¡äº†å¤æ‚æ€§å’Œå®ç”¨æ€§ï¼Œç‰¹åˆ«æ˜¯GUIçš„åŠ å…¥å’Œå†…éƒ¨DDDæ¶æ„çš„åº”ç”¨å¤§å¤§æå‡äº†ç”¨æˆ·ä½“éªŒå’Œä»£ç è´¨é‡ï¼Œæ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ å’Œå‚è€ƒçš„ä¼˜ç§€é¡¹ç›®æ¶æ„ã€‚
