# GUIæ•°æ®æµæ¶æ„å›¾è¡¨

> **ç”¨é€”**: ç”¨äºæˆªå›¾å±•ç¤ºGUIå±‚çš„æ•°æ®æµå’Œæ¶æ„å…³ç³»  
> **åˆ›å»ºæ—¥æœŸ**: 2025å¹´1æœˆ  
> **ç‰ˆæœ¬**: v1.0  

---

## ğŸ¯ å®Œæ•´æ¶æ„å›¾

```mermaid
graph TB
    subgraph "ç”¨æˆ·æ¥å£å±‚"
        CLI[CLIå‘½ä»¤è¡Œå·¥å…·]
        GUI[GUIç•Œé¢ - PySide6]
        API[APIæ¥å£ - å¾…å®ç°]
    end
    
    subgraph "GUIå±‚ (qtomography/gui/)"
        MainWindow[MainWindow<br/>ä¸»çª—å£]
        DataPanel[DataPanel<br/>æ•°æ®é¢æ¿]
        ConfigPanel[ConfigPanel<br/>é…ç½®é¢æ¿]
        ExecutePanel[ExecutePanel<br/>æ‰§è¡Œé¢æ¿]
        ProgressPanel[ProgressPanel<br/>è¿›åº¦é¢æ¿]
        SummaryPanel[SummaryPanel<br/>ç»“æœé¢æ¿]
        FigurePanel[FigurePanel<br/>å›¾åƒé¢æ¿]
        ControllerRunner[ControllerRunner<br/>æ§åˆ¶å™¨è¿è¡Œå™¨]
    end
    
    subgraph "åº”ç”¨å±‚ (qtomography/app/)"
        Controller[ReconstructionController<br/>é‡æ„æ§åˆ¶å™¨]
        Config[ConfigIO<br/>é…ç½®ç®¡ç†]
    end
    
    subgraph "é¢†åŸŸå±‚ (qtomography/domain/)"
        Density[DensityMatrix<br/>å¯†åº¦çŸ©é˜µ]
        Projectors[ProjectorSet<br/>æŠ•å½±ç®—ç¬¦]
        Linear[LinearReconstructor<br/>çº¿æ€§é‡æ„]
        MLE[MLEReconstructor<br/>MLEé‡æ„]
    end
    
    subgraph "åˆ†æå±‚ (qtomography/analysis/)"
        Bell[BellAnalysis<br/>Bellæ€åˆ†æ]
        Metrics[Metrics<br/>æŒ‡æ ‡è®¡ç®—]
        Comparison[Comparison<br/>æ–¹æ³•å¯¹æ¯”]
    end
    
    subgraph "åŸºç¡€è®¾æ–½å±‚ (qtomography/infrastructure/)"
        Repository[ResultRepository<br/>ç»“æœå­˜å‚¨]
        Visualizer[ReconstructionVisualizer<br/>å¯è§†åŒ–]
    end
    
    subgraph "å·¥å…·å±‚ (qtomography/utils/)"
        Utils[å·¥å…·å‡½æ•°<br/>å¾…æ‰©å±•]
    end
    
    CLI --> Controller
    GUI --> MainWindow
    MainWindow --> DataPanel
    MainWindow --> ConfigPanel
    MainWindow --> ExecutePanel
    MainWindow --> ProgressPanel
    MainWindow --> SummaryPanel
    MainWindow --> FigurePanel
    ExecutePanel --> ControllerRunner
    ControllerRunner --> Controller
    Controller --> Linear
    Controller --> MLE
    Linear --> Density
    MLE --> Density
    Density --> Projectors
    Controller --> Repository
    Controller --> Visualizer
    Repository --> Bell
    Bell --> Metrics
    Metrics --> Comparison
```

---

## ğŸ”„ æ•°æ®æµæ—¶åºå›¾

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant GUI as GUIç•Œé¢
    participant MainWindow as ä¸»çª—å£
    participant Panels as é¢æ¿ç»„ä»¶
    participant Runner as æ§åˆ¶å™¨è¿è¡Œå™¨
    participant Controller as é‡æ„æ§åˆ¶å™¨
    participant Domain as é¢†åŸŸå±‚
    participant Infrastructure as åŸºç¡€è®¾æ–½å±‚
    
    User->>GUI: é€‰æ‹©æ•°æ®æ–‡ä»¶
    GUI->>Panels: æ›´æ–°æ•°æ®é¢æ¿
    User->>GUI: é…ç½®å‚æ•°
    GUI->>Panels: æ›´æ–°é…ç½®é¢æ¿
    User->>GUI: ç‚¹å‡»è¿è¡Œ
    GUI->>MainWindow: å‘å°„run_requestedä¿¡å·
    MainWindow->>Runner: å¯åŠ¨å¼‚æ­¥ä»»åŠ¡
    Runner->>Controller: æ‰§è¡Œé‡æ„
    Controller->>Domain: è°ƒç”¨é‡æ„ç®—æ³•
    Domain->>Infrastructure: ä¿å­˜ç»“æœ
    Infrastructure->>Runner: è¿”å›ç»“æœ
    Runner->>MainWindow: å‘å°„finishedä¿¡å·
    MainWindow->>Panels: æ›´æ–°ç»“æœé¢æ¿
    GUI->>User: æ˜¾ç¤ºç»“æœ
```

---

## ğŸ“Š GUIç»„ä»¶å…³ç³»å›¾

```mermaid
graph LR
    subgraph "GUIç»„ä»¶å±‚æ¬¡"
        MainWindow[MainWindow<br/>ä¸»çª—å£æ§åˆ¶å™¨]
        
        subgraph "å·¦ä¾§é¢æ¿"
            DataPanel[DataPanel<br/>æ•°æ®é€‰æ‹©]
            ConfigPanel[ConfigPanel<br/>å‚æ•°é…ç½®]
            ExecutePanel[ExecutePanel<br/>ä»»åŠ¡æ§åˆ¶]
        end
        
        subgraph "å³ä¾§é¢æ¿"
            ProgressPanel[ProgressPanel<br/>è¿›åº¦æ˜¾ç¤º]
            SummaryPanel[SummaryPanel<br/>ç»“æœæ±‡æ€»]
            FigurePanel[FigurePanel<br/>å›¾åƒå±•ç¤º]
        end
        
        subgraph "æœåŠ¡å±‚"
            ControllerRunner[ControllerRunner<br/>å¼‚æ­¥ä»»åŠ¡ç®¡ç†]
        end
    end
    
    MainWindow --> DataPanel
    MainWindow --> ConfigPanel
    MainWindow --> ExecutePanel
    MainWindow --> ProgressPanel
    MainWindow --> SummaryPanel
    MainWindow --> FigurePanel
    ExecutePanel --> ControllerRunner
    
    DataPanel -.->|dataset_changed| MainWindow
    ExecutePanel -.->|run_requested| MainWindow
    ExecutePanel -.->|cancel_requested| MainWindow
    ControllerRunner -.->|progress| MainWindow
    ControllerRunner -.->|finished| MainWindow
```

---

## ğŸ¯ ä¿¡å·æ§½è¿æ¥å›¾

```mermaid
graph TD
    subgraph "ä¿¡å·å‘å°„æº"
        DataPanel[DataPanel<br/>dataset_changed]
        ExecutePanel[ExecutePanel<br/>run_requested<br/>cancel_requested<br/>open_output_requested]
        ControllerRunner[ControllerRunner<br/>started<br/>progress<br/>finished<br/>failed<br/>cancelled]
    end
    
    subgraph "ä¿¡å·æ¥æ”¶è€…"
        MainWindow[MainWindow<br/>ä¸»çª—å£å¤„ç†]
        ProgressPanel[ProgressPanel<br/>è¿›åº¦æ›´æ–°]
        SummaryPanel[SummaryPanel<br/>ç»“æœå±•ç¤º]
    end
    
    DataPanel -->|dataset_changed| MainWindow
    ExecutePanel -->|run_requested| MainWindow
    ExecutePanel -->|cancel_requested| MainWindow
    ExecutePanel -->|open_output_requested| MainWindow
    ControllerRunner -->|started| MainWindow
    ControllerRunner -->|progress| MainWindow
    ControllerRunner -->|finished| MainWindow
    ControllerRunner -->|failed| MainWindow
    ControllerRunner -->|cancelled| MainWindow
    
    MainWindow -->|update_event| ProgressPanel
    MainWindow -->|load_summary| SummaryPanel
```

---

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

### æˆªå›¾å»ºè®®
1. **å®Œæ•´æ¶æ„å›¾**: é€‚åˆå±•ç¤ºæ•´ä½“ç³»ç»Ÿæ¶æ„
2. **æ•°æ®æµæ—¶åºå›¾**: é€‚åˆå±•ç¤ºç”¨æˆ·æ“ä½œæµç¨‹
3. **GUIç»„ä»¶å…³ç³»å›¾**: é€‚åˆå±•ç¤ºç•Œé¢ç»„ä»¶å±‚æ¬¡
4. **ä¿¡å·æ§½è¿æ¥å›¾**: é€‚åˆå±•ç¤ºäº‹ä»¶å¤„ç†æœºåˆ¶

### å›¾è¡¨ç‰¹ç‚¹
- **æ¸…æ™°åˆ†å±‚**: ä¸åŒé¢œè‰²åŒºåˆ†ä¸åŒå±‚æ¬¡
- **å…³ç³»æ˜ç¡®**: ç®­å¤´è¡¨ç¤ºä¾èµ–å’Œè°ƒç”¨å…³ç³»
- **ç»„ä»¶è¯¦ç»†**: åŒ…å«å…·ä½“çš„ç±»åå’ŒèŒè´£
- **æ˜“äºç†è§£**: é€‚åˆæŠ€æœ¯æ–‡æ¡£å’Œæ¼”ç¤º

### å¯¼å‡ºå»ºè®®
- ä½¿ç”¨Mermaidåœ¨çº¿ç¼–è¾‘å™¨å¯¼å‡ºPNG/SVG
- å»ºè®®åˆ†è¾¨ç‡: 1920x1080æˆ–æ›´é«˜
- èƒŒæ™¯è‰²: ç™½è‰²æˆ–æµ…è‰²
- å­—ä½“å¤§å°: 12-14px

---

## ğŸ”§ è‡ªå®šä¹‰é€‰é¡¹

å¦‚éœ€ä¿®æ”¹å›¾è¡¨ï¼Œå¯ä»¥è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š
- **é¢œè‰²ä¸»é¢˜**: ä¿®æ”¹subgraphæ ·å¼
- **èŠ‚ç‚¹å½¢çŠ¶**: è°ƒæ•´æ–¹æ‹¬å·æ ·å¼
- **ç®­å¤´ç±»å‹**: ä½¿ç”¨ä¸åŒç®­å¤´ç¬¦å·
- **å¸ƒå±€æ–¹å‘**: ä¿®æ”¹graph TB/LR/TDç­‰

---

*æ­¤æ–‡æ¡£ä¸“é—¨ç”¨äºç”ŸæˆGUIæ•°æ®æµæ¶æ„å›¾è¡¨ï¼Œä¾¿äºæˆªå›¾å’Œæ¼”ç¤ºä½¿ç”¨ã€‚*
