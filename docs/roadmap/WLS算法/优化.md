**WLS 配置化落地方案**

* **后端参数扩展**
  * 在 **qtomography/domain/reconstruction/wls.py** 中保留现有接口，新增两个可选入参：**min_expected_clip**（默认 1e-12）和 **optimizer_ftol**（默认 1e-9）。**_objective_function** 里用该 clip 值代替硬编码，**reconstruct_with_details** 调用 **minimize** 时把 **ftol** 写成 **optimizer_ftol**。
  * 暴露已有的 **regularization** 与 **max_iterations**，并在 docstring/类型注释里明确用途，方便 GUI 生成表单提示。
* **配置对象/序列化**
  * 在负责重建配置的层（如果有 dataclass/JSON 配置，例如 **qtomography/domain/reconstruction/__init__.py** 或 CLI 入口）增加 **WLSConfig**，包含 **regularization**, **min_expected_clip**, **max_iterations**, **optimizer_ftol**。默认值与后端一致，便于 CLI/GUI 传递。
  * 更新加载/保存逻辑（如 YAML/JSON）以记录这些字段，确保用户下次打开 GUI 时能恢复自定义设定。
* **GUI 交互**
  * 在 GUI 中 WLS 选项卡展开面板，放置：
    1. **最小理论概率 (min_expected_clip)**：输入框或滑条（范围 1e-12–1e-6），并提示“限制极小概率的权重”。
    2. **正则系数 (regularization)**：数值框，可为 0 表示关闭。
    3. **最大迭代次数 (max_iterations)**：整数框，默认 2000。
    4. **优化容差 ftol (optimizer_ftol)**：科学计数法输入，默认 1e-9。
  * 当用户切换到其他算法时隐藏面板；当选 WLS 时自动填入当前配置并允许修改。
  * 若 GUI 有“恢复默认”按钮，调用配置对象的默认值重置。
* **CLI/批处理支持**
  * 在 **qtomography/cli/main.py** (或相应入口) 增加命令行参数 **--wls-min-expected-clip**, **--wls-regularization**, **--wls-max-iterations**, **--wls-ftol**，并把它们写入配置对象，保证非 GUI 用户也能控制。
* **验证与提示**
  * 在 GUI/CLI 上做基本校验：clip > 0、ftol > 0、max_iterations > 0。
  * 在 WLS 结果面板显示实际使用的参数，帮助用户回溯调试。
* **文档与帮助**
  * 更新 **packaging/DATA_SELECTION_DESIGN.md** 或用户手册，说明这四个参数的意义、推荐取值范围以及何时调整；在 GUI tooltip 中同步简短描述（例如“增大 clip 以减弱对低概率噪声的敏感度”）。

按以上步骤改造后，用户在 GUI 中选择 WLS 时即可直接调整权重相关和优化控制参数，也可通过 CLI/配置文件批量运行，确保体验一致。
