鉴定结论

你仓库中名为 “MLE” 的重构器实际实现的是加权最小二乘（WLS）型的卡方目标，而非多项式分布的极大似然：
目标函数使用 χ² 形式：sum((y − p)^2 / p) + λ||θ||²，而不是对数似然 −sum n_i log p_i
关键实现位置：python/qtomography/domain/reconstruction/mle.py:243 开始的 _objective_function，其核心是
expected = ...（预测概率）
diff = probabilities - expected
chi2 = np.sum((diff ** 2) / expected)（典型 WLS/皮尔逊卡方）
正则项 + regularization * np.sum(params ** 2)
因此，该模块应更名为 WLS，并在对外展示（CLI、GUI、文档、记录）统一使用 “WLS” 命名。
改名范围总览

核心类与文件
类：MLEReconstructor → WLSReconstructor；MLEReconstructionResult → WLSReconstructionResult
文件：python/qtomography/domain/reconstruction/mle.py → wls.py
应用层/控制器
允许方法集合和控制流中所有 "mle" → "wls"
配置项字段：mle_regularization、mle_max_iterations → wls_regularization、wls_max_iterations
CLI（命令行）
参数选择：--method {linear,mle,both} → {linear,wls,both}，并兼容旧值 “mle”（打印弃用警告，内部映射为 “wls”）
参数：--mle-regularization、--mle-max-iterations → --wls-regularization、--wls-max-iterations（保留旧别名并标注弃用）
输出/报告/对比文案：Linear vs MLE → Linear vs WLS
GUI（PySide6）
配置面板勾选项与标签：MLE → WLS
高级参数标签与字段：MLE 正则化/最大迭代 → WLS 正则化/最大迭代
分析/对比工具
所有 “Linear vs MLE” → “Linear vs WLS”，以及内部使用的 “mle” 方法名改为 “wls”
持久化/结果记录与读取
新输出的 method 字段值写 “wls”
读取时兼容既有记录中 method: "mle"，在内存中映射为 “wls”
测试
测试文件、断言、样例数据中 “mle” 统一替换为 “wls”，并为兼容路径保留一组过渡期测试
文档与示例
所有文案、示例命令、图注、报表标题等统一替换为 WLS
更新 README/教程/面试材料/对比图等
—下面按模块给出逐文件修改建议、兼容策略与落地步骤—

一、核心域模型与重构器

目标：类和模块的对外命名统一为 WLS；内部实现保留不变。
修改建议
重命名文件
python/qtomography/domain/reconstruction/mle.py → python/qtomography/domain/reconstruction/wls.py
重命名类与导出
class MLEReconstructor → class WLSReconstructor
class MLEReconstructionResult → class WLSReconstructionResult
__all__ = ["WLSReconstructor", "WLSReconstructionResult"]
兼容过渡（推荐保留一版）
新增一个 mle.py 兼容层：从 wls 导入并发出 DeprecationWarning
示例：from .wls import WLSReconstructor as MLEReconstructor, WLSReconstructionResult as MLEReconstructionResult
变更影响
所有引用 qtomography.domain.reconstruction.mle 的地方需要指向 wls，或在过渡期继续引用 mle（兼容层）不报错但会警告。
二、应用层控制器/配置

目标：允许方法集合/配置字段/控制流从 “mle” → “wls”
修改建议
方法集合
python/qtomography/app/controller.py:109 _ALLOWED_METHODS = {"linear","mle"} → {"linear","wls"}
配置字段
mle_regularization → wls_regularization
mle_max_iterations → wls_max_iterations
校验提示、文档字符串同步改名
控制分支调整
所有判断 if "mle" in methods 改为 if "wls" in methods
兼容过渡
在配置解析/构造入口提供映射
接收老字段名（mle_regularization/mle_max_iterations）时，打印弃用警告并转写到新字段
接收老方法名 “mle” 时，映射为 “wls”，并记录一条日志/警告
输出结果记录 method 列写入 “wls”
三、CLI（命令行）

目标：用户参数与帮助文本统一 WLS；兼容旧用法
修改建议
方法参数
python/qtomography/cli/main.py:69 choices=["linear","mle","both"] → ["linear","wls","both"]
帮助文本全面替换为 WLS
参数改名
--mle-regularization → --wls-regularization
--mle-max-iterations → --wls-max-iterations
解析时同时注册旧别名，解析到后打印 “已弃用，将在X版本移除”，再映射到新字段
方法解析函数 _resolve_methods
输入为 “mle” 时返回 (“wls”,) 并打印弃用告警
报表与输出文本
所有 “Linear vs MLE” → “Linear vs WLS”，包括横幅、字段打印、JSON 键名等
兼容过渡
保留旧参数的别名至少一个小版本周期
CLI 输出在有旧参数时打印清晰的迁移提示
四、GUI（PySide6）

目标：交互与标签统一 WLS
修改建议（示例键位）
python/qtomography/gui/panels/config_panel.py:20 勾选项文案 “MLE” → “WLS”
WLS 正则化/最大迭代的标签：64、77 等附近行替换
构建 methods 列表时（100-111）将 “mle” → “wls”
将内部绑定的字段键 mle_regularization、mle_max_iterations → wls_*
兼容过渡
如果 GUI 通过配置文件读取老字段名，使用与控制器相同的映射策略
五、分析与对比

目标：对比项改为 Linear vs WLS
修改建议
python/qtomography/analysis/comparison.py 文案与逻辑中所有 “mle” → “wls”
DataFrame 操作中选择 method == "mle" 改为 "wls"
兼容过渡
若读入历史 CSV/JSON，含 “mle”，在构建对比数据时映射为 “wls” 再处理
六、持久化记录与数据迁移

目标：新记录全部写 “wls”；旧记录读出能正常用
修改建议
写入路径：ReconstructionRecord 序列化时 method 写 “wls”
读取路径：如果 payload["method"] == "mle"，读入时转换为 “wls”（或保留读入后统一映射）
历史数据迁移（可选）
提供一个简单脚本，遍历 records/*.json，将 "method": "mle" → "wls"，同时备份原文件
对 summary.csv 做列级替换或生成新文件 summary_wls.csv 防丢失
七、测试与示例

目标：测试覆盖 WLS 标注，保留对旧接口的兼容测试
修改建议
将 test_mle_* 文件更名为 test_wls_*，类名/断言/样例数据值 method 改为 “wls”
CLI 测试中对 --mle-* 参数保留一组“兼容路径”用例，校验会打印弃用信息并成功运行
验收建议
单测先改最少集：重构器、控制器、CLI 解析与对比模块
再跑集成测试与端到端示例（Linear vs WLS 报表）
八、文档与示例命令

目标：对外叙述与教程统一 WLS
修改建议
README、教程（teach/implemented/roadmap 等）中的 “MLE” 全部改为 “WLS”
示例命令、对比图表标题、文内解释同步替换
在更新日志中写明 “MLE 更名为 WLS（算法实际为加权最小二乘 χ² 目标）”，并列出兼容策略
九、兼容策略（建议方案）

过渡期（1-2 个小版本）
接受 “mle” 输入（方法/参数/字段），内部映射为 “wls”，打印 DeprecationWarning
读取历史记录 "method": "mle" 时映射为 "wls"，对外展示为 WLS
保留 qtomography.domain.reconstruction.mle 兼容导入（薄层包装，警告 + 转发到 wls）
最终移除
在发行说明中明确移除时间，届时删除所有 “mle” 别名与兼容层
十、改动点位（关键定位）

核心目标函数（证明为 WLS）
python/qtomography/domain/reconstruction/mle.py:243
允许方法集合（需改）
python/qtomography/app/controller.py:109
CLI 参数与选择（需改）
python/qtomography/cli/main.py:69
python/qtomography/cli/main.py:83
python/qtomography/cli/main.py:88
GUI 配置面板（需改）
python/qtomography/gui/panels/config_panel.py:20
python/qtomography/gui/panels/config_panel.py:64
python/qtomography/gui/panels/config_panel.py:77
python/qtomography/gui/panels/config_panel.py:100
分析对比（需改）
python/qtomography/analysis/comparison.py:68
测试（需改）
python/tests/integration/test_mle_reconstructor_integration.py:1
python/tests/unit/test_mle_reconstructor.py:1
以及多个断言中 method == "mle"
十一、实施顺序与校验清单

新建 wls.py 并迁移类名；mle.py 加兼容转发与警告
应用层控制器配置与方法集合统一改名（含构造/验证/分支）
CLI 方法解析与参数改名，加入旧别名与警告
GUI 配置面板文案与键名改为 WLS
分析/对比/报表改名；读取历史记录时做方法名映射
测试批量替换；保留一组兼容路径测试
文档统一改名；README 与发行说明更新
全局搜索 “\bmle\b” 确认无遗漏；跑一轮端到端任务与报告生成
十二、给你的现成片段（可直接用）

兼容方法解析映射（CLI/控制器复用）
“mle” → “wls”，打印警告
读取历史记录时映射 “mle” → “wls”
兼容导入层 mle.py 中的转发模板（DeprecationWarning）
如果你愿意，我可以按上述指南分批提交实际代码修改（先做核心重构器与 CLI 解析映射，再推进 GUI/分析/测试与文档），并输出一次“变更清单 + 验收报告”